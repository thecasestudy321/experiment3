webpackJsonp([58],{169:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a){for(var i=new PIXI.Container,o=new PIXI.filters.ColorMatrixFilter,r=n||!1,s=a||{addArrow:!1,type:"horizontal",scale:1},d=new PIXI.Container,h=0;h<3;++h){var c=h+1,l=PIXI.Sprite.fromFrame("TAP_1"+c);l.x=-l.width/2,l.y=-l.height/2;var u=new PIXI.Container;u.addChild(l),d.addChild(u)}var f=0;if(s.direction)switch(s.direction){case"top":f=-Math.PI/2;break;case"bottom":f=Math.PI/2;break;case"left":f=Math.PI;break;case"right":f=0;break;default:f=0}d.filters=[o];for(var p=0;p<d.children.length;p++){var v=d.children[p];v.scale.x=v.scale.y=2,p<2&&g(v,.75*p)}if(i.addChild(d),s.addArrow){var x,I;if(s.direction){x=PIXI.Sprite.fromFrame("oneArrow"),I=new PIXI.extras.MovieClip([x]);var w=s.scale?s.scale:1;I.scale.x=I.scale.y=w,I.pivot={x:0,y:I.height/2},I.rotation=f}else{x=PIXI.Sprite.fromFrame("NBarrow"),(I=new PIXI.extras.MovieClip([x])).pivot={x:I.width/2,y:I.height/2};var T=s.scale?s.scale:1;I.scale.x=I.scale.y=T,"horizontal"!==(s.type?s.type:"horizontal")&&(I.rotation=Math.PI/2)}i.addChild(I),i.arrow=I,i.addEventListener("hideArrow",function(){I.alpha=0,I.visible=!1}),i.addEventListener("showArrow",function(){I.alpha=1,I.visible=!0})}d.alpha=.4;var _=new PIXI.Graphics;function g(e,t){TweenMax.to(e,1.5,{delay:t,alpha:0,repeat:-1}),TweenMax.to(e.scale,1.5,{x:5,y:5,delay:t,repeat:-1})}return _.beginFill(16776960,0),_.drawRect(-50,-50,100,100),i.addChild(_),i.addEventListener(MouseEvent.MOUSE_OVER,function(){d.alpha=.6}),i.addEventListener(MouseEvent.MOUSE_OUT,function(){d.alpha=.4}),i.addEventListener(TouchEvent.TOUCH_BEGIN,function(){i.emit(i.event.TAP),!r&&i.parent&&i.parent.removeChild(i)}),i.x=e,i.y=t,i.setColor=function(e){var t=e>>16,n=e>>8&255,a=255&e;o._loadMatrix([t,0,0,0,0,0,n,0,0,0,0,0,a,0,0,0,0,0,255,0],!1),d.filters=[o]},i.setRotation=function(e){i.rotation=e},i.showAllDir=function(){if(s.direction)for(var e=0;e<3;e++){var t=new PIXI.Container;t.addChild(PIXI.Sprite.fromFrame("oneArrow")),i.addChild(t),t.pivot={x:0,y:I.height/2},t.rotation=Math.PI/2*(e+1)}else{var n=new PIXI.Container;n.addChild(PIXI.Sprite.fromFrame("NBarrow")),i.addChild(n),n.pivot={x:I.width/2,y:I.height/2},n.rotation=i.rotation+Math.PI/2}},i.event={TAP:"pointTap",HIDEARR:"hideArrow",SHOWARR:"showArrow"},instance.info&&instance.info.newLayOut&&i.scale.set(.6,.6),i}},292:function(e,t,n){"use strict";var a=r(n(567)),i=r(n(169)),o=r(n(537));function r(e){return e&&e.__esModule?e:{default:e}}nb.substance0026=extendsClass(ScienceMain,{frame0:function(e){e=e||{};var t=this,n=new Audio(a.default);n.load();var r=(0,i.default)(350,3,!0,{addArrow:!0,type:"horiaontal"});r.width*=.66,r.height*=.66;var s=[],d=[],h=PIXI.Texture.fromFrame(e.rulerTexture||"ruler.png");h.width*=.66,h.height*=.66;var c=[];instance.NBDownTip.showTip(instance.info.OPERATION_0);var l=20,u=0,f=.3,p=8,v=h.width/l,x=t.hand.x+t.hand.width-$s(230),I=t.hand.x-$s(390),w=0;o.default.bind(t.switchs,[t.page0,t.page1,t.page2,t.page3],{isLoop:!1});for(var T=0;T<l;T++)s.push(new PIXI.Point(T*v,0)),d.push({x:T*v,y:0});var _=new PIXI.mesh.Rope(h,s);this.addChildAt(_,1),this.strip=_,_.y=this.hand.y,_.alpha=0,t.hand.alpha=0,setTimeout(function(){E(0),TweenMax.to([_,t.hand],1,{alpha:1})},500),_.addChild(r),t.addChild(t.hand);var g=t.ref;function E(e){var n=4*(+e+2);_.x=t.hand.x-(1-n/22)*_.width}function m(e){if("upDown"===_.direction){r=-(_.downPoint.y-e.data.global.y),u+=r/180,w=Math.PI/2,_.downPoint.y=e.data.global.y,p=(_.x+h.width-(t.hand.x-t.hand.width+t.hand.width))/h.width*l>>0;var n=(p=l-p)/l,a=instance.const.VERTICAL_MIN_ANGLE+instance.const.MAX_ANGLE_PARAM*(1-n);u>a?u=a:u<-a&&(u=-a)}else if("leftRight"===_.direction)instance.const.ALLOW_LEFT_RIGHT&&(_.x-=_.downPoint.x-e.data.global.x,_.x>x?_.x=x:_.x<I&&(_.x=I),_.downPoint.x=e.data.global.x);else{var i=e.data.global.x,o=e.data.global.y,r=instance.const.SENSITIVITY;Math.abs(o-_.downPoint.y)>r?_.direction="upDown":Math.abs(i-_.downPoint.x)>r&&(_.direction="leftRight",_.downPoint.x=e.data.global.x)}}function A(){if("upDown"===_.direction)!function(){n.pause(),n.currentTime=0;var e=p/l;if(f=.5+.5*e,n.playbackRate=.5+1*e,instance.const.ALLOW_CHANGE_VOLUME){var a=instance.const.VERTICAL_MIN_ANGLE+instance.const.MAX_ANGLE_PARAM*(1-e);u=Math.abs(u),n.volume=u/a}else u=.1+.3*(1-e),n.volume=u/instance.const.MAX_ANGLE_PARAM;n.play(),-1===c.indexOf(t.switchs._pageIndex)&&(c.push(t.switchs._pageIndex),4===c.length&&0===t.text.alpha?(TweenMax.to(t.text,.6,{alpha:1}),TweenMax.to(t.text.scale,.4,{x:1.1,y:1.1,repeat:3,yoyo:!0})):1===c.length&&instance.NBDownTip.showTip("尝试调整直尺使其伸出桌面的长度不同"))}(),t.ref.emit("startPlay");else if("leftRight"===_.direction){var e=_.x,a=t.hand.x-(1-8/22)*_.width,i=t.hand.x-(1-12/22)*_.width,o=t.hand.x-(1-16/22)*_.width,r=t.hand.x-(1-20/22)*_.width;e<=a?(e=a,t.switchs.setIndex(0)):e>a&&e<=i?(e=i,t.switchs.setIndex(1)):e<o&&e>i?(e=o,t.switchs.setIndex(2)):e>=o&&(e=r,t.switchs.setIndex(3)),_.x=e,n.pause(),n.currentTime=0,u=.01}else 0!==n.currentTime&&n.play();_.drag=!1,_.direction="",g.removeListener(TouchEvent.TOUCH_MOVE,m),g.removeListener(TouchEvent.TOUCH_END,A),g.removeListener(TouchEvent.TOUCH_END_OUDSIDE,A)}g.addEventListener(TouchEvent.TOUCH_BEGIN,function(e){instance.NBDownTip.hideTip(instance.info.OPERATION_0),_.removeChild(r),n.pause(),_.drag=!0,g.addEventListener(TouchEvent.TOUCH_MOVE,m),g.addEventListener(TouchEvent.TOUCH_END,A),g.addEventListener(TouchEvent.TOUCH_END_OUDSIDE,A),_.downPoint={x:e.data.global.x,y:e.data.global.y}}),t.switchs.addEventListener(o.default.event.ON_CHANGE,E),t.text.alpha=0,this.onUpdate=function(){if(!1===_.drag){if(0===u)return void(0!==n.currentTime&&(n.pause(),n.currentTime=0,t.onStepComplete()));(u-=.0025)<0&&(u=0,t.isEmit||(t.ref.emit("playStop"),t.isEmit=!0)),w+=f}for(var e=u*Math.sin(w),a={x:d[p-1].x,y:0},i=p;i<l;i++)a=NBMath.rotaPoint({x:a.x+v,y:a.y},a,e*(i-p)/(l-p)),s[i].x=a.x,s[i].y=a.y},this.setMaxAngle=function(e){u=e},this.getMaxAngle=function(){return u},this.getRopeCount=function(){return l},this.getPointsRef=function(){return d},this.getStartSeg=function(){return p},this.getRopeSeg=function(){return v},this.getPoints=function(){return s}},start:function(){this.bindScriptToSprite(this.frame0,"frame0")},info:{experimentImport:"不断改变尺子伸出桌面的长度，它振动时发出的音高会怎么变化？",labName:"尺子的音高变化",title0:"移动直尺并弹动发声",OPERATION_0:"拨动直尺使其发声",CONCLUSION:"尺子伸出桌面长度越长，振动越慢音高越低；尺子伸出桌面长度越短，振动越快，音高越高。",newLayOut:!0},const:{ALLOW_LEFT_RIGHT:!0,VERTICAL_MIN_ANGLE:.2,ALLOW_CHANGE_VOLUME:!1,MAX_ANGLE_PARAM:.4,SENSITIVITY:$s(20)},event:{}}),e.exports=nb.substance0026},537:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={event:{ON_INIT:"switchPages.event.ON_INIT",ON_CHANGE:"switchPages.event.ON_CHANGE",ON_TAP:"switchPages.event.ON_TAP",ON_MOVING:"switchPages.event.ON_MOVING"}},i={isLoop:!1,speed:1,autoTime:0};a.bind=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e&&e.pageMask){var o=!0;if(t.forEach(function(e,t){if(!e)return o=!1,void console.error("pages["+t+"]不合法")}),o){var r=Object.assign(i,n);!function(){var n=e.last,i=e.next,o=e.pageMask,h=e._switchPagesMaskW=o.width;t.forEach(function(t,n){e.addChildAt(t,0),t.x=0===n?0:h,t.y=0,t.mask=o.children[0]}),e._pageIndex=0,n&&n.addEventListener(TouchEvent.TAP,function(){e.emit(a.event.ON_TAP,-1),s(-1)});i&&i.addEventListener(TouchEvent.TAP,function(){e.emit(a.event.ON_TAP,1),s(1)});e.isChangeAble=!0,r.autoTime&&s(0);d(!0),e.emit(a.event.ON_INIT)}(),e.setIndex=function(t,n){var a=t-e._pageIndex;return a&&s(a,n),e},e.setAutoTime=function(t){return r.autoTime=t,clearTimeout(e.autoTimer),t&&(e.autoTimer=setTimeout(function(){s(1)},1e3*r.autoTime)),e}}}else console.error("请正确传入和配置组件");function s(n,i){if(e.isChangeAble){var o=t.length;if(r.isLoop||!(e._pageIndex+n<0||e._pageIndex+n>=o)){var h=(e._pageIndex+o+n)%o,c=t[h],l=t[e._pageIndex],u=e._switchPagesMaskW,f=new TimelineMax({onStart:function(){d(!1)},onComplete:function(){e._pageIndex=h,e.emit(a.event.ON_CHANGE,e._pageIndex),d(!0),r.autoTime&&(e.autoTimer&&(clearTimeout(e.autoTimer),e.autoTimer=null),e.autoTimer=setTimeout(function(){s(1)},1e3*r.autoTime))}}),p=r.speed||1;c.parent.addChild(c);var v=void 0!==i?i:.4/p;n<0?(c.x=-u,f.to([c,l],v,{x:"+="+u})):(c.x=u,f.to([c,l],v,{x:"-="+u}))}}}function d(n){e.isChangeAble=n,e.emit(a.event.ON_MOVING,n);var i=e.last,o=e.next;if(n){if(r.isLoop)return h(i,!0),void h(o,!0);var s=t.length,d=e._pageIndex;h(i,d>0),h(o,d<s-1)}else h(i,!1),h(o,!1);function h(e,t){e&&(e.interactive=t,e.alpha=t?1:.5)}}},t.default=a},567:function(e,t,n){e.exports=n.p+"77e2a8878f1051e97a70311417ad9d3f.mp3"}});