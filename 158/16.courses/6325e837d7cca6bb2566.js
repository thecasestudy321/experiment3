webpackJsonp([16],{169:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n,r){for(var i=new PIXI.Container,o=new PIXI.filters.ColorMatrixFilter,a=n||!1,s=r||{addArrow:!1,type:"horizontal",scale:1},u=new PIXI.Container,h=0;h<3;++h){var l=h+1,c=PIXI.Sprite.fromFrame("TAP_1"+l);c.x=-c.width/2,c.y=-c.height/2;var v=new PIXI.Container;v.addChild(c),u.addChild(v)}var f=0;if(s.direction)switch(s.direction){case"top":f=-Math.PI/2;break;case"bottom":f=Math.PI/2;break;case"left":f=Math.PI;break;case"right":f=0;break;default:f=0}u.filters=[o];for(var d=0;d<u.children.length;d++){var y=u.children[d];y.scale.x=y.scale.y=2,d<2&&w(y,.75*d)}if(i.addChild(u),s.addArrow){var g,m;if(s.direction){g=PIXI.Sprite.fromFrame("oneArrow"),m=new PIXI.extras.MovieClip([g]);var p=s.scale?s.scale:1;m.scale.x=m.scale.y=p,m.pivot={x:0,y:m.height/2},m.rotation=f}else{g=PIXI.Sprite.fromFrame("NBarrow"),(m=new PIXI.extras.MovieClip([g])).pivot={x:m.width/2,y:m.height/2};var _=s.scale?s.scale:1;m.scale.x=m.scale.y=_,"horizontal"!==(s.type?s.type:"horizontal")&&(m.rotation=Math.PI/2)}i.addChild(m),i.arrow=m,i.addEventListener("hideArrow",function(){m.alpha=0,m.visible=!1}),i.addEventListener("showArrow",function(){m.alpha=1,m.visible=!0})}u.alpha=.4;var x=new PIXI.Graphics;function w(t,e){TweenMax.to(t,1.5,{delay:e,alpha:0,repeat:-1}),TweenMax.to(t.scale,1.5,{x:5,y:5,delay:e,repeat:-1})}return x.beginFill(16776960,0),x.drawRect(-50,-50,100,100),i.addChild(x),i.addEventListener(MouseEvent.MOUSE_OVER,function(){u.alpha=.6}),i.addEventListener(MouseEvent.MOUSE_OUT,function(){u.alpha=.4}),i.addEventListener(TouchEvent.TOUCH_BEGIN,function(){i.emit(i.event.TAP),!a&&i.parent&&i.parent.removeChild(i)}),i.x=t,i.y=e,i.setColor=function(t){var e=t>>16,n=t>>8&255,r=255&t;o._loadMatrix([e,0,0,0,0,0,n,0,0,0,0,0,r,0,0,0,0,0,255,0],!1),u.filters=[o]},i.setRotation=function(t){i.rotation=t},i.showAllDir=function(){if(s.direction)for(var t=0;t<3;t++){var e=new PIXI.Container;e.addChild(PIXI.Sprite.fromFrame("oneArrow")),i.addChild(e),e.pivot={x:0,y:m.height/2},e.rotation=Math.PI/2*(t+1)}else{var n=new PIXI.Container;n.addChild(PIXI.Sprite.fromFrame("NBarrow")),i.addChild(n),n.pivot={x:m.width/2,y:m.height/2},n.rotation=i.rotation+Math.PI/2}},i.event={TAP:"pointTap",HIDEARR:"hideArrow",SHOWARR:"showArrow"},instance.info&&instance.info.newLayOut&&i.scale.set(.6,.6),i}},380:function(t,e,n){"use strict";var r=h(n(528)),i=h(n(531)),o=h(n(520)),a=h(n(521)),s=h(n(169)),u=n(534);function h(t){return t&&t.__esModule?t:{default:t}}nb.substance0223=extendsClass(ScienceMain,{frame0:function(){var t=this.timeline;o.default.init.apply(t),a.default.apply(this);for(var e=[],n=0;n<4;n++){var r=this["step"+n];e[n]=r,r.stepFunc=instance["step"+n]}e[0].stepFunc(),e[0].inited=!0,e[3].stepFunc(),e[3].inited=!0,instance.NBDownTip.showTip("取下酒精灯灯帽"),t.on(o.default.event.CLICK_NODE,function(t){var n=e[t.index];n.inited||(n.inited=!0,n.stepFunc())}),this.onUpdate=function(){e[0].stepUpdate(),e[3].stepUpdate()}},step0:function(){instance.NBDownTip.hideTip();var t=this,e=t.matches,n=t.spiritLamp,o=t.iron,a=(0,s.default)(0,0);n.addChild(a);var u=0,h=!1;r.default.init(e,{defaultPo:!0}),i.default.init.apply(n),n.interactive=!1,e.on(r.default.event.MOVING,function(){e.match.fireArea.hitTest(n.head)&&n.lightFire()});var l=!1;n.on(i.default.event.COVER_DOWN,function(){NBDrag.removeDrag(n.cover),0===u&&(u=1),l||(l=!0,e.addChild(a),a.position.set(65,40),instance.NBDownTip.showTip("拖拽火柴点燃酒精灯"))}),n.cover.on(NBDrag.event.START_DRAG,function(){instance.NBDownTip.hideTip()}),n.cover.on(NBDrag.event.STOP_DRAG,function(){1===u&&instance.NBDownTip.showTip("拖拽火柴点燃酒精灯")}),o.a.tone.alpha=0;var c=0;o.addEventListener(NBDrag.event.START_DRAG,function(){o.removeChild(a),instance.NBDownTip.hideTip(),TweenMax.to(t.txt2,.3,{alpha:0})}),o.addEventListener(NBDrag.event.STOP_DRAG,function(){if(0===u?instance.NBDownTip.showTip("取下酒精灯灯帽"):1===u?instance.NBDownTip.showTip("拖拽火柴点燃酒精灯"):2===u?instance.NBDownTip.showTip("用镊子夹取石块"):3===u?instance.NBDownTip.showTip("用酒精灯外焰加热"):4===u&&instance.NBDownTip.showTip("将烧红的石块放在冷水中，观察现象"),this.ref.hitTest(t.tone)&&(2===u&&(u=3,instance.NBDownTip.showTip("用酒精灯外焰加热"),TweenMax.to(t.txt3,.3,{alpha:0})),TweenMax.to(t.tone,.01,{alpha:0,onComplete:function(){t.tone.visible=!1}}),TweenMax.to(t.iron,.01,{currentFrame:1})),t.iron.a.tone.alpha>0&&this.hitTest(t.cup)){u=5,instance.NBDownTip.hideTip(),c=t.iron.a.tone.alpha;var e=new TimelineMax,r=t.iron;NBDrag.removeDrag(r),e.append(TweenMax.to(r,.5,{x:t.cup.x+$s(140),y:t.cup.y-$s(160)})),e.append(TweenMax.to(r,.5,{rotation:-45*Math.PI/180,onComplete:function(){c>.3&&v++}})),e.append(TweenMax.to(r,.5,{x:t.cup.x+$s(140),y:t.cup.y+$s(50),onComplete:function(){h=!0}}))}t.iron.hitTest(t.spiritLamp)&&TweenMax.to(t.iron,.3,{x:n.x+76,y:n.y-134})});var v=0;[].push(Math.random()+2),t.stepUpdate=function(){if(e.render(),n.render(),1==h){var r=t.iron.a.tone.alpha;t.iron.a.tone.alpha-=.01,r<=.1&&c>.3&&(1==v&&TweenMax.to(t.cup,1,{currentFrame:30}),2==v&&(t.iron.a.tone.a0.visible=!1,t.iron.a.back.w0.visible=!1,TweenMax.to(t.cup,.5,{currentFrame:39})),3==v&&(t.iron.a.tone.a2.visible=!1,t.iron.a.back.w2.visible=!1,TweenMax.to(t.cup,.5,{currentFrame:48})),4==v&&(t.iron.a.tone.a1.visible=!1,t.iron.a.back.w1.visible=!1,TweenMax.to(t.cup,.5,{currentFrame:t.cup.totalFrames-1}))),r<=0&&(t.iron.a.tone.alpha=0,h=!1,TweenMax.to(t.iron,.5,{x:t.cup.x+$s(140),y:t.cup.y-$s(160),onComplete:function(){TweenMax.to(t.iron,.5,{rotation:0,onComplete:function(){4==v&&(t.iron.visible=!1),NBDrag.addDrag(t.iron)}})}}))}if(n.render()){o.tapPoint||(o.addChild(a),a.position.set(30,-30),o.tapPoint=a,u=2,NBDrag.addDrag(o),instance.NBDownTip.showTip("用镊子夹取石块"));var i=o.a.tone,s=n.fireArea.getBounds(),l=i.getBounds(),f=1-NBPoint.distance({x:s.x+s.width/2,y:s.y+s.height},{x:l.x+l.width/2,y:l.y+l.height})/s.height,d=i.toGlobal({x:0,y:0});t.spiritLamp.fireArea.hitTest(i)&&d.y>s.y&&d.y<s.y+s.height?(3===u&&(u=4,instance.NBDownTip.showTip("将烧红的石块放在冷水中，观察现象")),i.alpha<1?i.alpha+=f/100:i.alpha=1):i.hitTest(t.cup)||(i.alpha-=.001)}}},step1:function(){instance.NBDownTip.hideTip();var t=this,e=t.timeline,n=t.st,r=t.bottle0,i=t.bottle;o.default.init.apply(e),i.alpha=0,r.cover.alpha=0,r.cover.y-=10;var a=!1;t.stone.visible=!1,NBDrag.addDrag(t.st),e.visible=!1;var u=(0,s.default)(22,20);n.addChild(u),instance.NBDownTip.showTip("将石块放到瓶子中"),n.on(NBDrag.event.START_DRAG,function(){instance.NBDownTip.hideTip(),TweenMax.to(t.txt1,.3,{alpha:0})}),n.on(NBDrag.event.STOP_DRAG,function(){if(this.hitTest(t.bottle)){var n=new TimelineMax({onComplete:function(){r.visible=!1,i.alpha=1,t.st.visible=!1,t.stone.visible=!0,e.visible=!0,e.setAutoPlay(!0,2),e.setAutoAlign(!1)}});n.add(TweenMax.to(this,.5,{x:t.stone.x+$s(151.25),y:200})),n.add(TweenMax.to(this,.5,{y:t.stone.y+$s(134.45)})),n.add(TweenMax.to(r.cover,.3,{y:"+=10",alpha:1}))}}),e.on(o.default.event.ON_PLAY,function(e){if(e.time<.75&&!TweenMax.isTweening(t.bottle)){a=!1;var n=new TimelineMax;n.append(TweenMax.to(t.bottle,.2,{currentFrame:2,ease:Linear.easeNone})),n.append(TweenMax.to(t.bottle,2,{currentFrame:25,repeat:-1,ease:Linear.easeNone})),TweenMax.to(t.stone,.2,{currentFrame:2,onComplete:function(){TweenMax.to(t.stone,2,{currentFrame:25,repeat:-1,ease:Linear.easeNone})}})}e.time>.75&&e.time<.99&&(0==a&&(TweenMax.killTweensOf(t.bottle),TweenMax.killTweensOf(t.stone),t.bottle.gotoAndStop(26),t.stone.gotoAndStop(26),a=!0),t.bottle.currentFrame=26+(t.bottle.totalFrames-1-26)/.25*(e.time-.75),t.stone.currentFrame=26+(t.stone.totalFrames-1-26)/.25*(e.time-.75)),1==e.time&&(t.bottle.gotoAndStop(t.bottle.totalFrames-1),t.stone.gotoAndStop(t.bottle.totalFrames-1));for(var r=0;r<55;r++)t.stone["a"+r].getChildAt(0).alpha=e.time,t.stone["a"+r].getChildAt(1).alpha=1-e.time})},step2:function(){instance.NBDownTip.hideTip();var t=this.timeline,e=this.bean;o.default.init.apply(t),t.setAutoPlay(!0,2),t.setDrag(!0),t.addEventListener(o.default.event.ON_PLAY,function(t){e.currentFrame=t.time*(e.totalFrames-1)})},step3:function(){instance.NBDownTip.hideTip();var t=this.earth,e=t.ant,n=t.antLabel,r=10,i=[];n.alpha=1;var o=["a","b","c","d","e","f","g","h","i","j","k"];function a(){if(!e.isRotating){var t=v()-this.startTime;if(t<.9*this.duration){var n=t/this.duration*this.dis;this.x=this.startP.x+n*Math.cos(this.angel),this.y=this.startP.y+n*Math.sin(this.angel)}else this.updateEndP()}}function s(){var t=this;e.isRotating=!0;var n=++this.routePointIndex,r=!1;n>=this.route.length&&(n=0,this.routePointIndex=0,this.route=c(),this.x=this.route[0].x,this.y=this.route[0].y,r=!0);var i=this.route[n];this.startP.position.set(this.x,this.y),this.endP.position.set(i.x,i.y),this.startTime=v(),this.dis=function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}(this.startP,this.endP),this.angel=Math.atan2(this.endP.y-this.startP.y,this.endP.x-this.startP.x),this.duration=this.dis/this.moveSpeed;var o=u.M.getXianDianByDis(.2*this.dis,!0,this.startP,this.endP);r?e.isRotating=!1:(Math.abs(this.rotation-this.angel)>Math.PI&&(this.rotation>this.angel?this.angel+=2*Math.PI:this.rotation+=2*Math.PI),TweenMax.to(this,.2*this.duration/1e3,{rotation:this.angel,x:o.x,y:o.y,ease:Linear.easeIn,onComplete:function(){t.rotation=t.angel,e.isRotating=!1}}))}function h(e){for(var n=[],r=0;r<int.MAX_VALUE;r++){var i=t[e+r];if(!i)break;n.push(i)}return n}!function(){e.mask=t.antMask.children[0];for(var n=0;n<r;n++)i[n]=h(o[n]);e.route=c();var u=e.route[0];e.x=u.x,e.y=u.y,e.play(),e.animationSpeed=.4,e.rotation=2*Math.PI*Math.random(),e.routePointIndex=1,e.targetRotation=e.rotation,e.moveSpeed=.08,e.rotationSpeed=.1,e.startP=u.clone(),e.endP=e.route[1].clone(),e.moveUpdate=a,e.updateEndP=s,e.isRotating=!1,e.updateEndP()}(),this.stepUpdate=function(){e.moveUpdate(),n.x=e.x,n.y=e.y};var l=0;function c(){for(var t=parseInt(Math.random()*r);t===l;)t=parseInt(Math.random()*r);return l=t,i[t]}function v(){return(new Date).getTime()}},start:function(){this.bindScriptToSprite(this.frame0,"frame0"),this.bindScriptToSprite(this.frame1,"frame1")},info:{experimentImport:"看起来十分坚硬的岩石，是什么力量使它们发生了变化？",labName:"探索岩石变化原因",title0:"点燃酒精灯，将烧红的石块放入冷水中，反复几次观察现象",title1:"拖动时间轴观察种子在装有石膏糊的培养皿中发芽的变化",CONCLUSION:"岩石变化原因，由于受水、大气、气温或动植物的作用，岩石破碎，这种现象叫风化。",noTitle:!0},const:{},event:{}}),t.exports=nb.substance0223},520:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={event:{CLICK_NODE:"nodeTap",CLICK_NODE_REACHED:"nodeTapReached",ON_COMPLETE:"timelineComplete",ON_PLAY:"timelinePlaying",REACHED_NODE:"reachedNode",START_DRAG:"startDrag",DRAGING:"draging",STOP_DRAG:"stopDrag"},init:function(){var t,e,n=this;if(n.bgMask){var i=n.bgMask.getChildAt(0);n.progressBar.mask=i,i.scale.x=0}var o=this.a0.x===this.a1.x?"vertical":"horizontal",a=0,s=[];n.drag.lastPos={x:n.drag.x,y:n.drag.y};for(var u=0;u<int.MAX_VALUE;u++){var h=this["a"+u];if(void 0===h){e="vertical"===o?this["a"+(u-1)].y:this["a"+(u-1)].x,a=u;break}s.push(h),0===u&&(t="vertical"===o?h.y:h.x),h.addEventListener(TouchEvent.TAP,function(){var t=this;"vertical"===o?TweenMax.to(n.drag,.5,{y:this.y}):TweenMax.to(n.drag,.5,{x:this.x,onComplete:function(){n.emit(r.event.CLICK_NODE_REACHED,{index:t.name.substr(1,1)})}}),this.totalFrames&&(s.forEach(function(t){return t.currentFrame=0}),this.currentFrame=1),n.drag.lastPos={x:this.x,y:this.y},n.emit(r.event.CLICK_NODE,{index:this.name.substr(1,1)})})}this.setDrag=function(i){i?(NBDrag.addDrag(n.drag),n.drag.on(NBDrag.event.START_DRAG,function(){var i=(n.drag.x-t)/(e-t);n.emit(r.event.START_DRAG,{time:i})}),n.drag.on(NBDrag.event.DRAG_MOVE,function(){var i=(n.drag.x-t)/(e-t);n.emit(r.event.DRAGING,{time:i})}),n.drag.on(NBDrag.event.STOP_DRAG,function(){var i=(n.drag.x-t)/(e-t);n.emit(r.event.STOP_DRAG,{time:i}),i>=1&&n.emit(r.event.ON_COMPLETE,{time:i})})):NBDrag.removeDrag(n.drag)},n.drag.addEventListener(NBDrag.event.STOP_DRAG,function(){if(!1!==n._align_){var r=a-1;if("vertical"===o){var i=Math.round((this.y-t)/(e-t)*r);i<0&&(i=0)}else{var s=Math.round((this.x-t)/(e-t)*r);s<0&&(s=0)}}}),n.drag.addEventListener(NBDrag.event.DRAG_MOVE,function(){v()});var l=!1;n.drag.constY=n.drag.y;var c,v=function(){n.drag.y=n.drag.constY,n.drag.x>=e&&(n.drag.x=e),n.drag.x<=t&&(n.drag.x=t);var i=(n.drag.x-t)/(e-t);if(i<1){l=!1,n.emit(r.event.ON_PLAY,{time:i});for(var o=0;o<s.length;o++)n.drag.lastPos.x<=s[o].x&&n.drag.x>s[o].x&&n.emit(r.event.REACHED_NODE,{index:o})}else l||(l=!0,n.emit(r.event.ON_COMPLETE,{time:i}));(n.drag.line0&&(n.drag.line0.rotation=1800*i*Math.PI/180,n.drag.line1.rotation=360*i*Math.PI/180),n.bgMask)&&(n.bgMask.getChildAt(0).scale.x=i);n.drag.lastPos={x:n.drag.x,y:n.drag.y}};this.getNodeCount=function(){return a},this.setNodePos=function(t){var e=this["a"+t];"vertical"===o?n.drag.y=e.y:n.drag.x=e.x},nb.MovieClip.ticker.add(function(){n._auto_&&!n.drag.isDragging&&("vertical"===o?n.drag.y+=n._speed_:n.drag.x+=n._speed_,v())}),this.setAutoPlay=function(t,e){this._auto_=t,this._speed_=e||.1},this.setAutoAlign=function(t){this._align_=t},this.setMomentsPause=function(t,e,r){clearTimeout(c),t&&!n.NOTafterStopPlay?(n.setAutoPlay(!1),clearTimeout(c),n.setAutoPlay(!1),c=setTimeout(function(){n.setAutoPlay(!0,r)},e)):n.setAutoPlay(!1)},this.resetTimeline=function(){(this.drag.x=this.bgMask.x,n.bgMask)&&(n.bgMask.getChildAt(0).scale.x=0)}}};e.default=r},521:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){t=t||{};var e=this,n=[];r.default.init.apply(this.timeline);for(var i=0;i<this.timeline.getNodeCount();i++){var o=this["step"+i];n.push(o),o.alpha=0,o.visible=!1}var a=this.step0;a.visible=!0,a.alpha=1;var s=0;this.timeline.on(r.default.event.CLICK_NODE,function(r){if(void 0!==r.index&&r.index!=s){var i=t.offset||1200;i=r.index>s?$s(i):-$s(i);var o=void 0!==a.currentX?a.currentX:a.currentX=a.x;TweenMax.to(a,t.oldTm||.6,{x:o+i,alpha:0,onComplete:function(e){e.visible=!1,t.isFix||(e.y=0)},onCompleteParams:[a],ease:Expo.easeOut}),s=r.index,(a=n[s]).visible=!0,o=void 0!==a.currentX?a.currentX:a.currentX=a.x,a.x=o-i,TweenMax.to(a,t.newTm||1,{x:o,alpha:1,ease:Expo.easeOut,onComplete:function(){e.emit(e.boxSwitch_event.CHANGE_COM,{target:a,index:r.index})}})}}),this.addEventListener("render",function(){a.onUpdate&&a.onUpdate()}),e.boxSwitch_event={CHANGE_COM:"changeCom"}};var r=function(t){return t&&t.__esModule?t:{default:t}}(n(520))},528:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){t&&t.__esModule}(n(169));var r={event:{START:"matchesBegin",MOVING:"moving",STOP:"matchesEnd"},init:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t,i=n.match;i.visible=!1,NBDrag.addDrag(i);var o=Object.assign({defaultPo:!0},e),a=null;function s(){i.visible=!1,n.putFire()}n.addEventListener(TouchEvent.TOUCH_BEGIN,function(t){n.getBounds();i.visible=!0,i.alpha=1;var e=n.toLocal(t.data.global);i.x=e.x,i.y=e.y,null==a&&((a=ParticleUtil.getParticle(ParticleUtil.particles.match_fire)).alpha=.4,n.stepRoot.addChild(a),o.defaultPo?a.bind(i,$s(0),$s(50)):a.bind(i,$s(-65),$s(20)),window.part=a),a.visible=!0,n.fire=a,n.emit(r.event.START,{matches:i}),TouchEvent.simulateTouchDown(i,t)}),i.addEventListener(NBDrag.event.STOP_DRAG,function(){n.emit(r.event.STOP,{matches:i}),s()}),n.render=function(){1==i.visible&&a&&a.render()},i.addEventListener(TouchEvent.TOUCH_MOVE,function(){n.emit(r.event.MOVING,{matches:i})}),n.putFire=function(){null!=a&&(a.visible=!1,a.destroy(),a=null),i.sound&&(i.sound.stop(),i.sound=null)},n.hideMatch=s,n.isBurning=function(){return null!=a}}};e.default=r},531:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={event:{LIGHT_FIRE:"lightFire",PUT_FIRE:"putFire",COVER_DOWN:"coverDown"},init:function(){var t={},e=arguments[0];t.offsetX=void 0==t.offsetX?0:t.offsetX,t.offsetY=void 0==t.offsetY?0:t.offsetY,t.scaleX=void 0==t.scaleX?1:t.scaleX,t.scaleY=void 0==t.scaleY?1:t.scaleY;var n={x:this.corver.x,y:this.corver.y},i=this;NBDrag.addDrag(this.corver),NBDrag.addDrag(this),this.corver.on(NBDrag.event.START_DRAG,function(t){t.data.isPropagationStopped=!0,"spiritLamp"===this.parent.name&&this.parent.parent.addChildWithSamePos(this)}),this.corver.on(NBDrag.event.STOP_DRAG,function(){this.hitTest(i.body)?(i.addChild(this),this.x=n.x,this.y=n.y,0==e||this.parent.putFire()):i.emit(r.event.COVER_DOWN)}),this.lightFire=function(){this.corver.hitTest(this.body)&&!0===this.corver.visible||(null==this.fire&&(this.fire=ParticleUtil.getParticle(t.fire||ParticleUtil.particles.spirit_fire),this.fire.scale.set(t.scaleX,t.scaleY),this.parent.addChildAt(this.fire,i.parent.getChildIndex(i)+1),this.fire.bind(this,-10+t.offsetX,10+t.offsetY),this.fire.alpha=.6),this.fire.visible=!0,this.emit(r.event.LIGHT_FIRE))},this.putFire=function(){this.fire&&(this.fire.visible=!1,this.fire.destroy(),this.fire=null,this.emit(r.event.PUT_FIRE)),this.fire_blue&&(this.fire_blue.visible=!0,this.fire_blue.destroy(),this.fire_blue=null)},this.render=function(){return!!this.isBurning()&&(this.fire&&this.fire.render(!0),this.fire_blue&&this.fire_blue.render(!0),!0)},this.isBurning=function(){return this.fire&&this.fire.visible},this.hideCover=function(t){this.cover.visible=!t},this.cover=this.corver}};e.default=r},534:function(t,e,n){"use strict";(function(t){var e,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=t;function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o="function"==typeof Symbol&&"symbol"==n(Symbol.iterator)?function(t){return void 0===t?"undefined":n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":n(t)},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();!function t(n,r,i){function o(s,u){if(!r[s]){if(!n[s]){if(!u&&("function"==typeof e&&e))return e(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+s+"'")}var h=r[s]={exports:{}};n[s][0].call(h.exports,function(t){return o(n[s][1][t]||t)},h,h.exports,t,n,r,i)}return r[s].exports}for(var a="function"==typeof e&&e,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e,n){var r=function(){function t(){i(this,t)}return a(t,null,[{key:"arrayContainsValue",value:function(t,e){return-1!=t.indexOf(e)}},{key:"arrayContainsArray",value:function(e,n){var r=!0,i=void 0,o=n.length;for(i=0;i<o;i++){var a=n[i];if(!t.arrayContainsValue(e,a)){r=!1;break}}return r}},{key:"removeValueFromArray",value:function(t,e){var n=void 0;for(n=t.length;n>-1;n--)if(t[n]==e)return t.splice(n,1),!0;return!1}},{key:"addSingleArr",value:function(e,n){return!t.arrayContainsValue(e,n)&&(e.push(n),!0)}},{key:"removeValueFromIndex",value:function(t,e){var n=t.length,r=void 0;return e>=0&&e<n&&(r=t[e],t.splice(e,1)),r}},{key:"removeArrayFromArray",value:function(e,n){var r=n.length,i=void 0;for(i=0;i<r;i++){var o=n[i];t.removeValueFromArray(e,o)}}},{key:"createUniqueCopy",value:function(e){var n=new Array,r=e.length,i=void 0,o=void 0;for(o=0;o<r;++o)i=e[o],t.arrayContainsValue(n,i)||n.push(i);return n}},{key:"arraysAreEqual",value:function(t,e){if(t.length!=e.length)return!1;var n=t.length,r=void 0;for(r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}},{key:"clear",value:function(t){t&&0!=t.length&&t.splice(0,t.length)}},{key:"print",value:function(t){for(var e in t)trace(e+":"+t[e])}},{key:"getIndexFromValue",value:function(t,e){var n=-1,r=void 0,i=t.length;for(r=0;r<i;r++)if(e==t[r]){n=r;break}return n}},{key:"swapObj",value:function(t,e){var n=t;t=e,e=n}},{key:"swapArrObj",value:function(e,n,r){var i=t.getIndexFromValue(e,n),o=t.getIndexFromValue(e,r);i>-1&&o>-1&&(e[i]=r,e[o]=n)}},{key:"swapArrInd",value:function(t,e,n){var r=t[e],i=t[n];e>-1&&n>-1&&(t[e]=i,t[n]=r)}},{key:"swapChaArrInd",value:function(e,n,r){var i=[],o=void 0,a=void 0,s=void 0,u=void 0,h=e.length;if(n<0||n>=h)return e;if(r>=0&&r<h){o=e[n],a=e[r],t.removeValueFromIndex(e,n);var l=t.getIndexFromValue(e,a);for(s=0;s<l;s++)i[s]=e[s];for(i[l]=o,u=l+1;u<h+1;u++)i[u]=e[u-1]}else r>=h?(o=e[n],t.removeValueFromIndex(e,n),e.push(o),i=t.copyArray(e)):r<0&&(o=e[n],t.removeValueFromIndex(e,n),e.unshift(o),i=t.copyArray(e));return i}},{key:"getString",value:function(t){if(!t||0==t.length)return"";var e="";return $.each(t,function(t,n){e+=n}),e}},{key:"copy",value:function(t){return t?t.slice():null}},{key:"copyArray",value:function(e){return t.copy(e)}}]),t}();e.exports=r},{}],2:[function(t,e,r){var o=window.PIXI?window.PIXI.mesh.Mesh:function(){},s=function(t){function e(t,r,a){i(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=(void 0===e?"undefined":n(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));if(s.mess=a||{},s.points=[],s._ready=!0,s.rectW=10,s.rectH=10,s.radius=10,s.total=36,s.drawType=r||e.RECT,s.drawMode=o.DRAW_MODES.TRIANGLES,s.drawType===e.CRICLE)s.radius=s.mess.r||10,s.radius>300&&(s.total*=2);else if(s.drawType===e.RECT)s.rectW=s.mess.w||10,s.rectH=s.mess.h||10;else if(s.drawType===e.POLYGON){if(!a||!a.points||a.points.length<3)throw new Error("输入数据有误");s.points=a.points}return s.refresh(),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":n(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o),a(e,[{key:"updateData",value:function(){}},{key:"drawCircle",value:function(t){this.drawType=e.CRICLE,this.radius=t}},{key:"drawRect",value:function(t,n){this.drawType=e.RECT,this.rectW=t,this.rectH=n}},{key:"refresh",value:function(){var t=[0,0],n=[],r=[],i=this.texture;if(i._updateUvs(),this.drawType===e.RECT)$.each(i._uvs,function(t,e){n.push(e)}),t=[0,0,this.rectW,0,0,this.rectH,this.rectW,this.rectH],r=[0,1,2,1,3,2];else if(this.drawType===e.CRICLE){var o=0,a=i._uvs,s=2*this.radius/i.width,u=a.x1*s,h=a.y2*s,l={x:a.x0+u/2,y:a.y0+h/2};n.push(l.x,l.y);var c=u/2,v=2*Math.PI/this.total;for(p=0;p<this.total;p++){var f=o,d=this.radius*Math.cos(f),y=this.radius*Math.sin(f),g=c*Math.cos(f),m=c*Math.sin(f);o+=v,t.push(d,y),n.push(l.x+g,l.y+m),p>1&&r.push(0,p-1,p)}r.push(0,this.total-1,this.total,0,this.total,1)}else if(this.drawType==e.POLYGON){var p,_=1e6,x=-1e6,w=1e7,b=-1e5;for(t=[],p=0;p<this.points.length;p++)(P=this.points[p]).index=p,t.push(P.x,P.y),0===p?(_=x=P.y,w=b=P.x):(P.x<w&&(w=P.x),P.x>b&&(b=P.x),P.y<_&&(_=P.y),P.y>x&&(x=P.y));var k=b-w,M=x-_;u=(a=i._uvs).x1-a.x0,h=a.y2-a.y0;for(p=0;p<this.points.length;p++){var P=this.points[p];g=(P.x-w)/k,m=(P.y-_)/M;n.push(a.x0+u*g,a.y0+h*m)}r=3==this.points.length?[0,1,2]:this.createTriangles()}this.vertices=new Float32Array(t),this.uvs=new Float32Array(n),this.colors=new Float32Array([]),this.indices=new Uint16Array(r)}},{key:"createTriangles",value:function(){var t=this.points.concat(),e=[],n=0,r=0,i=0;for(n=0;n<t.length;n++)0==n?(a=t[t.length-1],s=t[n],u=t[n+1]):n==t.length-1?(a=t[n-1],s=t[n],u=t[0]):(a=t[n-1],s=t[n],u=t[n+1]),(h=this.cross(a,s,u))?r++:i++;var o;for(o=r>i,n=0;;){if(3==t.length){e.push(t[0].index,t[1].index,t[2].index);break}var a,s,u;n>t.length-1&&(n=0),0==n?(a=t[t.length-1],s=t[n],u=t[n+1]):n==t.length-1?(a=t[n-1],s=t[n],u=t[0]):(a=t[n-1],s=t[n],u=t[n+1]);var h=this.cross(a,s,u);if(h==o){var l=void 0,c=void 0,v=void 0;0==n?(l=t[t.length-1],c=t[n],v=t[n+1]):n==t.length-1?(l=t[n-1],c=t[n],v=t[0]):(l=t[n-1],c=t[n],v=t[n+1]);var f=void 0,d=!0;for(f=0;f<t.length;f++)if(t[f]!=l&&t[f]!=c&&t[f]!=v&&this.isInsideTriangle(l,c,v,t[f])){d=!1,n++;break}d&&(e.push(l.index,c.index,v.index),t.splice(n,1))}else n++}return e}},{key:"isInsideTriangle",value:function(t,e,n,r){var i=(t.x-r.x)*(e.y-r.y)-(e.x-r.x)*(t.y-r.y),o=(e.x-r.x)*(n.y-r.y)-(n.x-r.x)*(e.y-r.y),a=(n.x-r.x)*(t.y-r.y)-(t.x-r.x)*(n.y-r.y);return this.sign(i)===this.sign(o)&&this.sign(o)===this.sign(a)}},{key:"sign",value:function(t){return Math.abs(t)/t}},{key:"cross",value:function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)>0}},{key:"_onTextureUpdate",value:function(){(function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onTextureUpdate",this).call(this),this._ready&&this.refresh()}}]),e}();s.CRICLE="circle",s.RECT="rect",s.POLYGON="polygon",e.exports=s},{}],3:[function(t,e,n){var r=function(){function t(){i(this,t)}return a(t,null,[{key:"drawArc",value:function(t,e,n,r,i,o){var a=[e,n];o||(o=0),Math.PI;var s=o*Math.PI/180,u=(o+i)*Math.PI/180,h=[a[0]+r*Math.cos(s),a[1]+r*Math.sin(s)];t.moveTo(h[0],h[1]);for(var l=[a[0]+r*Math.cos(u),a[1]+r*Math.sin(u)],c=h,v=0;v<i;v+=2){var f=(v+o)*Math.PI/180,d=[r*Math.cos(f)+a[0],r*Math.sin(f)+a[1]];t.moveTo(c[0],c[1]),t.lineTo(d[0],d[1]),t.filling&&(t.lineTo(a[0],a[1]),t.lineTo(c[0],c[1])),c=d}t.lineTo(l[0],l[1]),t.filling&&(t.lineTo(a[0],a[1]),t.lineTo(c[0],c[1]))}}]),t}();e.exports=r},{}],4:[function(t,e,n){var r=function(){function t(){i(this,t),this._data={}}return a(t,[{key:"get",value:function(t){var e=this._data[this._hash(t)];return e&&e[1]}},{key:"find",value:function(t){return this.get(t)}},{key:"set",value:function(t,e){this._data[this._hash(t)]=[t,e]}},{key:"insert",value:function(t,e){this.set(t,e)}},{key:"put",value:function(t,e){this.set(t,e)}},{key:"copy",value:function(t){for(var e in t._data)this._data[e]=t._data[e]}},{key:"has",value:function(t){return this._hash(t)in this._data}},{key:"containsKey",value:function(t){return this.has(t)}},{key:"search",value:function(t){for(var e in this._data)if(this._data[e][1]===t)return this._data[e][0];return null}},{key:"remove",value:function(t){delete this._data[this._hash(t)]}},{key:"type",value:function(t){var e=Object.prototype.toString.call(t).slice(8,-1).toLowerCase();return"domwindow"!==e||t?e:t+""}},{key:"keys",value:function(){var t=[];return this.forEach(function(e,n){t.push(n)}),t}},{key:"getKeySet",value:function(){return this.keys()}},{key:"values",value:function(){var t=[];return this.forEach(function(e){t.push(e)}),t}},{key:"count",value:function(){return this.keys().length}},{key:"size",value:function(){return this.count()}},{key:"clear",value:function(){this._data={}}},{key:"clone",value:function(){return new t(this)}},{key:"forEach",value:function(t,e){for(var n in this._data){var r=this._data[n];t.call(e||this,r[1],r[0])}}},{key:"toString",value:function(){var t="HashMap Content = \n";return this.forEach(function(e,n){t+=n+" -> "+e+"\n"}),t}},{key:"length",value:function(){return this.count()}},{key:"isEmpty",value:function(){return 0===this.count()}},{key:"containsValue",value:function(t){var e=!1;return this.forEach(function(n,r){if(t===n)return e=!0,!1}),e}},{key:"getKeyValyeArray",value:function(){var t=[];return this.forEach(function(e,n){t.push({key:n,value:e})}),t}},{key:"_hash",value:function(e){switch(this.type(e)){case"undefined":case"null":case"boolean":case"number":case"string":case"regexp":return e+"";case"date":return"♣"+e.getTime();case"array":for(var n=[],r=0;r<e.length;r++)n[r]=this._hash(e[r]);return"♥"+n.join("⁞");default:return e.hasOwnProperty("_hmuid_")||(e._hmuid_=++t.uid),"♦"+e._hmuid_}}}]),t}();e.exports=r},{}],5:[function(t,e,n){var r=t("./NumberUtilities"),s=t("./Point"),u=t("./Rectangle"),h=t("./ArrayUtil"),l=t("./ObjTree"),c=function(){function t(){i(this,t)}return a(t,null,[{key:"sq",value:function(t){return Math.pow(Math.abs(t),2)}},{key:"bevel",value:function(t,e){return Math.sqrt(t*t+e*e)}},{key:"max",value:function(t){return Math.max.apply(null,t)}},{key:"ping",value:function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e/t.length}},{key:"getUnique",value:function(){return r.getUnique()}},{key:"getUniqueID",value:function(){return r.getUniqueID()}},{key:"getBoundsFromArray",value:function(t){for(var e=new u,n=1e8,r=-1e8,i=1e10,o=-1e9,a=0;a<t.length;a++){var s=t[a];s.x<n&&(n=s.x),s.y<i&&(i=s.y),s.x+s.width>r&&(r=s.x+s.width),s.y+s.height>o&&(o=s.y+s.height)}return e.x=n,e.y=i,e.width=r-n,e.height=o-i,e}},{key:"getCenP",value:function(t,e){return new s((t.x+e.x)/2,(t.y+e.y)/2)}},{key:"getPointLen",value:function(t,e){return s.distance(t,e)}},{key:"getFuhao",value:function(t){return t>=0?1:-1}},{key:"getXYLen",value:function(t,e,n,r){return Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))}},{key:"getXianDianByDis",value:function(e,n,r,i){var o;if(r.x===i.x&&r.y===i.y)return r.clone();if(Math.abs(i.x-r.x)<1e-6){if(n&&r.y>i.y||!n&&r.y<i.y)return new s(r.x,r.y-e);if(!n&&r.y>i.y||n&&r.y<i.y)return new s(r.x,r.y+e)}o=(i.y-r.y)/(i.x-r.x);var a=Math.sqrt(e*e/(1+o*o))+r.x,u=-Math.sqrt(e*e/(1+o*o))+r.x,h=o*(a-r.x)+r.y,l=o*(u-r.x)+r.y,c=t.sq(a-i.x)+t.sq(h-i.y),v=t.sq(u-i.x)+t.sq(l-i.y);return n?c>v?new s(u,l):new s(a,h):c>v?new s(a,h):new s(u,l)}},{key:"interpolate",value:function(t,e,n){var r=e.x-t.x,i=e.y-t.y;return new s(t.x+r*n,t.y+i*n)}},{key:"getRandColor",value:function(){return 16777215*Math.random()+4278190080}},{key:"getDecimalNum",value:function(t){var e=""+t;return this.StringUtil.contains(e,".")?(e=e.substring(e.indexOf(".")+1)).length:0}},{key:"getAngleP",value:function(t,e){e||(e=new s(0,0));var n=t.x-e.x,r=t.y-e.y;return Math.atan2(r,n)*(180/Math.PI)}},{key:"getAngleP1",value:function(t,e){var n=Math.atan2(t.y,t.x)*(180/Math.PI);return e?n-Math.atan2(e.y,e.x)*(180/Math.PI):n}},{key:"getAreaByPoints",value:function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);r=e.x-n.x,i=e.y-n.y;var a=Math.sqrt(r*r+i*i);r=n.x-t.x,i=n.y-t.y;var s=Math.sqrt(r*r+i*i),u=(o+a+s)/2;return Math.sqrt(u*(u-o)*(u-a)*(u-s))}},{key:"checkPointIn",value:function(e,n,r,i){var o=t.getAreaByPoints(n,r,i),a=0;return a+=t.getAreaByPoints(e,n,r),a+=t.getAreaByPoints(e,r,i),(a+=t.getAreaByPoints(e,i,n))===o||Math.abs(a-o)<1e-4}},{key:"getAngleByP",value:function(e,n,r){var i=t.getPointLen(n,r),o=t.getPointLen(e,r),a=t.getPointLen(e,n),s=2*o*a;0===s&&(s=1e-9);var u=(o*o+a*a-i*i)/s;return 180*Math.acos(u)/Math.PI}},{key:"getPoint_NeiXin",value:function(e,n,r){var i=t.getPointLen(e,n),o=t.getPointLen(n,r),a=t.getPointLen(e,r),u=new s;return u.x=(i*e.x+o*n.x+a*r.x)/(i+o+a),u.y=(i*e.y+o*n.y+a*r.y)/(i+o+a),u}},{key:"getSPPoint",value:function(t){return new s(t.x,t.y)}},{key:"setSPPoint",value:function(t,e){t&&e&&(t.x=e.x,t.y=e.y)}},{key:"setSPPointXY",value:function(t,e,n){t&&(t.x=e,t.y=n)}},{key:"rotaPointFromP",value:function(e,n,r){n.y===e.y&&(n.y=e.y+t.MIN);var i=new s(e.x-n.x,e.y-n.y),o=t.rotaPoint(i,r);return o.x+=n.x,o.y+=n.y,o}},{key:"atan",value:function(e,n){return t.getAngleP(e,n)}},{key:"getPFrom2DianAndAngle",value:function(e,n,r,i){e.clone(),n.clone();var o=180+t.atan(n,e)-i,a=t.toHu(o);e=t.rotaPoint(e,-a),n=t.rotaPoint(n,-a);var u=Math.sqrt(t.sq(n.x-e.x)+t.sq(n.y-e.y))*Math.sin(t.toHu(r))/Math.sin(t.toHu(180-r-i))+n.x,h=n.y,l=new s(u,h);return t.rotaPoint(l,a)}},{key:"toHu",value:function(t){return t/180*Math.PI}},{key:"toAngle",value:function(t){return t/Math.PI*180}},{key:"getNumStr",value:function(t){if(!(t=t.toString()))return"";var e=/(-?\d+)(\.\d+)?/;return null===e.exec(t)?0:e.exec(t)[0]||0}},{key:"getPStr",value:function(t){return/'+/.exec(t)}},{key:"getFAStr",value:function(t){return/[ABC]+/.exec(t)}},{key:"checkPointOnLineLeftOrRight",value:function(t,e,n){return(t.x-e.x)*(t.y-n.y)-(t.x-n.x)*(t.y-e.y)}},{key:"checkOnLineAB",value:function(t,e,n,r){return r||(r=.5),Math.abs((t.y-e.y)*(t.x-n.x)-(t.y-n.y)*(t.x-e.x))<r}},{key:"checkInLineAB",value:function(e,n,r,i){i||(i=.1);var o=!1;return e?t.getPointLen(e,n)+t.getPointLen(e,r)-t.getPointLen(n,r)<i&&(o=!0):o=!1,o}},{key:"isPingxing",value:function(t,e,n,r){var i=!1,o=t.x,a=t.y,s=e.x,u=e.y,h=n.x,l=n.y;return(u-a)*(r.x-h)==(s-o)*(r.y-l)&&(i=!0),i}},{key:"getJiaoP",value:function(t,e,n,r){var i,o=new s,a=t.x,u=t.y,h=e.x,l=e.y,c=n.x,v=n.y,f=r.x,d=r.y,y=1e-7;i=h===a?(l-u)/(h-a+y):(l-u)/(h-a);var g;return g=f===c?(d-v)/(f-c+y):(d-v)/(f-c),o.x=i===g?(i*a-g*c+v-u)/(i-g+y):(i*a-g*c+v-u)/(i-g),o.y=i*o.x-i*a+u,o}},{key:"checkJPIsInAB",value:function(e,n,r,i){var o=t.getJiaoP(e,n,r,i);return t.checkInLineAB(o,e,n)}},{key:"checkJPIsInABCD",value:function(e,n,r,i){var o=t.getJiaoP(e,n,r,i);return t.checkInLineAB(o,e,n)&&t.checkInLineAB(o,r,i)||t.checkInLineAB(e,r,i)||t.checkInLineAB(n,r,i)||t.checkInLineAB(r,e,n)||t.checkInLineAB(i,e,n)}},{key:"hasPoint",value:function(t,e){for(var n=!1,r=0;r<t.length;r++){var i=t[r];if(i.x===e.x&&i.y===e.y){n=!0;break}}return n}},{key:"rotaPoint",value:function(t,e){var n=new s;return n.x=Math.cos(e)*t.x-Math.sin(e)*t.y,n.y=Math.cos(e)*t.y+Math.sin(e)*t.x,n}},{key:"getPArrRect",value:function(t){for(var e=void 0,n=void 0,r=0;r<t.length;r++){var i=t[r];e?(e.x=Math.min(e.x,i.x),e.y=Math.min(e.y,i.y)):e=new s(i.x,i.y),n?(n.x=Math.max(n.x,i.x),n.y=Math.max(n.y,i.y)):n=new s(e.x,e.y)}return new u(e.x,e.y,n.x-e.x,n.y-e.y)}},{key:"getRectCen",value:function(t){var e=new s;return e.x=(t.left+t.right)/2,e.y=(t.top+t.bottom)/2,e}},{key:"getRectFromDuiP",value:function(t,e){var n=Math.min(t.x,e.x),r=Math.min(t.y,e.y),i=Math.abs(e.x-t.x),o=Math.abs(e.y-t.y);return new u(n,r,i,o)}},{key:"getZoomPoint",value:function(t,e,n,r){var i=t.x,o=t.y,a=e.x,u=e.y,h=n.x,l=n.y,c=r.x,v=r.y;return new s((h-i)/(a-i)*(c-i)+i,(l-o)/(u-o)*(v-o)+o)}},{key:"getZoomPointA",value:function(e,n,r,i,o){var a=e.x,u=e.y,h=n.x,l=n.y,c=r.x,v=r.y,f=i.x,d=i.y,y=new s(c-a,v-u),g=new s(h-a,l-u),m=new s(f-a,d-u),p=y.x/g.x,_=y.y/g.y,x=new s(p*m.x,_*m.y),w=x.x+a,b=x.y+u,k=new s(w-f,b-d),M=(k=t.getRoZoomP(k,o)).x+f,P=k.y+d;return new s(M,P)}},{key:"isPointNi",value:function(t,e,n){var r=e.x,i=e.y,o=n.x,a=n.y;return(t.x-r)*(a-i)<(t.y-i)*(o-r)}},{key:"getRoZoomP",value:function(e,n){var r=new s;return r.x=e.x*Math.cos(t.toHu(-n))+e.y*Math.sin(t.toHu(-n)),r.y=e.y*Math.cos(t.toHu(-n))-e.x*Math.sin(t.toHu(-n)),r}},{key:"getOvalPoint",value:function(t,e,n){void 0===n&&(n=null);var r=[],i=t/2,o=e/2,a=0,u=void 0,h=void 0;for(n||(n=new s(0,0));a<2*Math.PI;)u=n.x+i*Math.sin(a),h=n.y+o*Math.cos(a),r.push(new s(u,h)),a+=2/180*Math.PI;return r}},{key:"getRegPolygon",value:function(t,e,n){var r=[];if(1===t)return[e];for(var i=0;i<t;i++){var o=new s;o.x=e.x+n*Math.cos(2*Math.PI/t*i),o.y=e.y+n*Math.sin(2*Math.PI/t*i),Math.abs(o.x)<1e-5&&(o.x=0),Math.abs(o.y)<1e-5&&(o.y=0),r.push(o)}return r}},{key:"getLianPObj",value:function(t,e){return{p1:t,p2:e}}},{key:"getRegPolygonRay",value:function(e,n,r){var i=t.getRegPolygon(e,n,r),o=[];if(2===e)o.push(t.getLianPObj(i[0],i[1]));else if(e>2){for(var a=0;a<i.length-1;a++)o.push({p1:i[a],p2:i[a+1]});o.push({p1:i[i.length-1],p2:i[0]})}return{pArr:i,lianArr:o}}},{key:"getThreeRay",value:function(e,n,r){var i=[],o=[],a=0;i.push(n),a++;for(var u=Math.ceil((e-1)/3),h=0;h<u;h++)for(var l=0;l<3&&a!==e;l++){var c;c=1===i.length?i[0]:i[i.length-3];var v=new s(c.x,c.y-r);if(i.push(v),++a===e)break;var f=t.rotaPointFromP(v,n,2*-Math.PI/3);if(i.push(f),++a===e)break;var d=t.rotaPointFromP(v,n,2*Math.PI/3);if(i.push(d),++a===e)break}if(2===e)o.push(t.getLianPObj(i[0],i[1]));else if(3===e)o.push(t.getLianPObj(i[0],i[1])),o.push(t.getLianPObj(i[0],i[2]));else if(e>3){o.push(t.getLianPObj(i[0],i[1])),o.push(t.getLianPObj(i[0],i[2]));for(var y=0;y<=i.length-4;y++)o.push(t.getLianPObj(i[y],i[y+3]))}return{pArr:i,lianArr:o}}},{key:"getCrossRay",value:function(e,n,r){var i=[],o=[],a=0;i.push(n),a++;for(var u=Math.ceil((e-1)/3),h=0;h<u;h++)for(var l=0;l<4&&a!==e;l++){var c;c=1===i.length?i[0]:i[i.length-4];var v=new s(c.x,c.y-r);if(i.push(v),++a===e)break;var f=t.rotaPointFromP(v,n,-Math.PI/2);if(i.push(f),++a===e)break;var d=t.rotaPointFromP(v,n,-Math.PI);if(i.push(d),++a===e)break;var y=t.rotaPointFromP(v,n,Math.PI/2);if(i.push(y),++a===e)break}if(2===e)o.push(t.getLianPObj(i[0],i[1]));else if(3===e)o.push(t.getLianPObj(i[0],i[1])),o.push(t.getLianPObj(i[0],i[2]));else if(4===e)o.push(t.getLianPObj(i[0],i[1])),o.push(t.getLianPObj(i[0],i[2])),o.push(t.getLianPObj(i[0],i[3]));else if(e>4){o.push(t.getLianPObj(i[0],i[1])),o.push(t.getLianPObj(i[0],i[2])),o.push(t.getLianPObj(i[0],i[3]));for(var g=0;g<=i.length-5;g++)o.push(t.getLianPObj(i[g],i[g+4]))}return{pArr:i,lianArr:o}}},{key:"getHorizontalRay",value:function(e,n,r){var i=[],o=[],a=0;i.push(n),a++;for(var u=Math.ceil((e-1)/3),h=0;h<u;h++)for(var l=0;l<3&&a!==e;l++){var c;c=1===i.length?i[0]:i[i.length-2];var v=new s(c.x-r,c.y);if(i.push(v),++a===e)break;var f=t.rotaPointFromP(v,n,Math.PI);if(i.push(f),++a===e)break}if(2===e)o.push(t.getLianPObj(i[0],i[1]));else if(e>2){o.push(t.getLianPObj(i[0],i[1]));for(var d=0;d<=i.length-3;d++)o.push(t.getLianPObj(i[d],i[d+2]))}return{pArr:i,lianArr:o}}},{key:"getVerticalRay",value:function(e,n,r){var i=[],o=[],a=0;i.push(n),a++;for(var u=Math.ceil((e-1)/3),h=0;h<u;h++)for(var l=0;l<3&&a!==e;l++){var c;c=1===i.length?i[0]:i[i.length-2];var v=new s(c.x,c.y-r);if(i.push(v),++a===e)break;var f=t.rotaPointFromP(v,n,Math.PI);if(i.push(f),++a===e)break}if(2===e)o.push(t.getLianPObj(i[0],i[1]));else if(e>2){o.push(t.getLianPObj(i[0],i[1]));for(var d=0;d<=i.length-3;d++)o.push(t.getLianPObj(i[d],i[d+2]))}return{pArr:i,lianArr:o}}},{key:"getDuiDianP",value:function(e,n,r){var i=new s,o=t.getGaoDianFrom3Dian(e,n,r);return i.x=2*o.x-e.x,i.y=2*o.y-e.y,i}},{key:"getDuiDianDian",value:function(t,e){return new s(2*e.x-t.x,2*e.y-t.y)}},{key:"getNumJie",value:function(t,e){void 0===e&&(e=0),t-=0;var n=Math.pow(10,e),r=Math.round(t*n)/n+"",i=r.split(".");if(0===e)return i[0];var o=0;2===i.length?o=e-i[1].length:(o=e,r+=".");for(var a=0;a<o;)r+="0",a++;return r-0==0?0:r}},{key:"getNumToInt",value:function(t){var e=t+"",n=e.indexOf(".");return-1===n?e-0:(e=e.slice(0,n))-0}},{key:"getGaoDianFrom3Dian",value:function(t,e,n){if(!t||!e||!n)return console.error("nb-utils:getGaoDianFrom3Dian 参数不能为空"),null;if(e.x===n.x&&e.y===n.y)return new s(e.x,e.y);var r=t.x,i=t.y,o=e.x,a=e.y,u=n.x,h=n.y;return new s(1*((h-a)*(h-a)*o+(u-o)*(u-o)*r+(i-a)*(u-o)*(h-a))/((h-a)*(h-a)+(u-o)*(u-o)),((r-o)*(u-o)*(h-a)+(i-a)*(h-a)*(h-a))/((h-a)*(h-a)+(u-o)*(u-o))+a)}},{key:"getXianDuanGaoXianDian",value:function(e,n,r,i){void 0===i&&(i=!0);var o=t.getXianDianByDis(r,!0,e,n);return i?t.rotaPointFromP(o,e,-Math.PI/2):t.rotaPointFromP(o,e,Math.PI/2)}},{key:"getRectOneP",value:function(t,e,n){return new s(t.x+e.x-n.x,t.y+e.y-n.y)}},{key:"retrieveRGBComponent",value:function(t){return"[object String]"===Object.prototype.toString.call(t)&&(t="0x"+(t="#"===t.substring(0,1)?t.substring(1):t)-0),[t>>16,t>>8&255,255&t]}},{key:"generateFromRGBComponent",value:function(t){return null===t||3!==t.length||t[0]<0||t[0]>255||t[1]<0||t[1]>255||t[2]<0||t[2]>255?16777215:t[0]<<16|t[1]<<8|t[2]}},{key:"generateTransitionalColor",value:function(e,n,r){if(1===r)return[e];if(2===r)return[e,n];var i=t.retrieveRGBComponent(e),o=t.retrieveRGBComponent(n),a=[];a.push(e),r-=2;for(var s=o[0]-i[0],u=o[1]-i[1],h=o[2]-i[2],l=1;l<r-1;l++){var c=[i[0]+s*l/r,i[1]+u*l/r,i[2]+h*l/r];a.push(t.generateFromRGBComponent(c))}return a.push(n),a}},{key:"drawArc",value:function(t,e,n,r,i,o){var a=[e,n];o||(o=0),Math.PI;var s=o*Math.PI/180,u=(o+i)*Math.PI/180,h=[a[0]+r*Math.cos(s),a[1]+r*Math.sin(s)];t.moveTo(h[0],h[1]);for(var l=[a[0]+r*Math.cos(u),a[1]+r*Math.sin(u)],c=h,v=0;v<i;v+=2){var f=(v+o)*Math.PI/180,d=[r*Math.cos(f)+a[0],r*Math.sin(f)+a[1]];t.moveTo(c[0],c[1]),t.lineTo(d[0],d[1]),t.filling&&(t.lineTo(a[0],a[1]),t.lineTo(c[0],c[1])),c=d}t.lineTo(l[0],l[1]),t.filling&&(t.lineTo(a[0],a[1]),t.lineTo(c[0],c[1]))}},{key:"getArcPoints",value:function(e,n,r,i,o){i=t.toAngle(i);var a=[],u=[e,n];(o=t.toAngle(o))||(o=0),Math.PI;var h=o*Math.PI/180,l=(o+i)*Math.PI/180,c=[u[0]+r*Math.cos(h),u[1]+r*Math.sin(h)];a.push(new s(c[0],c[1])),Math.cos(l),Math.sin(l);for(var v=0;v<i;v+=1){rad=(v+o)*Math.PI/180;var f=[r*Math.cos(rad)+u[0],r*Math.sin(rad)+u[1]];a.push(new s(f[0],f[1]))}return a}},{key:"checkPolygonPointArr",value:function(e,n){for(var r=0,i=0,o=void 0,a=!1,s=0;s<n.length;s++){var u=void 0,h=void 0;s===n.length-1?(u=n[s],h=n[0]):(u=n[s],h=n[s+1]),o=t.getAngleByP(e,u,h),Math.abs(o-180)<.2&&(a=!0),i+=o}return a?r=2:!a&&Math.abs(i-360)<.2?r=1:Math.abs(i-360)>.2&&(r=3),r}},{key:"clonePointArr",value:function(t){if(!t)return null;for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(r.clone())}return e}},{key:"checkArrEqual",value:function(e,n,r){void 0===r&&(r=5),e=t.clonePointArr(e),n=t.clonePointArr(n);var i=t.getRectCen(t.getPArrRect(e)),o=t.getRectCen(t.getPArrRect(n)),a=o.x-i.x,s=o.y-i.y,u=void 0,h=void 0;for(u=0;u<e.length;u++){var l=e[u];l.x+=a,l.y+=s}for(u=0;u<e.length;u++){var c=e[u],v=!1;for(h=0;h<n.length;h++){var f=n[h];if(t.getPointLen(c,f)<=r){v=!0;break}}if(!v)return!1}return{chaX:a,chaY:s}}},{key:"checkPointEqual",value:function(e,n,r){return void 0===r&&(r=.1),t.getPointLen(e,n)<r}},{key:"checkPolygonPointArr2",value:function(t,e){for(var n=!1,r=0,i=0,o=e.length,a=0,s=o-1;a<o;s=a++){var u=(t.x-e[s].x)*(e[a].y-e[s].y)-(t.y-e[s].y)*(e[a].x-e[s].x);u>0?++r:u<0&&++i}return 0!==r&&0!==i||(n=!0),n}},{key:"drawPolygonPArr",value:function(t,e){t.moveTo(e[0].x,e[0].y),$.each(e,function(n,r){n>0&&t.lineTo(e[n].x,e[n].y)}),t.lineTo(e[0].x,e[0].y)}},{key:"vec3ToVec2",value:function(t){return nape.geom.Vec2.get(t.zpp_inner.x,t.zpp_inner.y)}},{key:"getJiao_polygon_line",value:function(e,n,r){for(var i=[],o=0;o<r.length;o++){var a=r[o],s=o===r.length-1?r[0]:r[o+1];if(!t.isPingxing(a,s,e,n)){var u=t.getJiaoP(e,n,a,s);t.checkInLineAB(u,a,s,.1)&&i.push(u)}}return i}},{key:"containtsP",value:function(e,n,r){void 0===r&&(r=.1);for(var i=!1,o=0;o<e.length;o++){var a=e[o];if(t.getPointLen(a,n)<r){i=!0;break}}return i}},{key:"getNearP",value:function(e,n){var r=1e5,i=void 0,o=void 0;for(o=0;o<e.length;o++){var a=e[o],s=t.getPointLen(n,a);s<r&&(r=s,i=a)}return i}},{key:"checkPolygonPointArr3",value:function(t,e){if(null===e)return!1;var n=e.length,r=0,i=void 0,o=void 0,a=0,s=0;for(i=e[0],r=1;r<=n;r++)o=e[r%n],t.y>Math.min(i.y,o.y)&&t.y<=Math.max(i.y,o.y)&&t.x<=Math.max(i.x,o.x)&&i.y!==o.y&&(s=(t.y-i.y)*(o.x-i.x)/(o.y-i.y)+i.x,(i.x===o.x||t.x<=s)&&a++),i=o;return a%2!=0}},{key:"centerRotate",value:function(t,e){var n=t.rotation;t.rotation=0;var r=t.width,i=t.height;t.rotation=n;var o=t.localToGlobal(new s(r/2,i/2));t.rotation=e;var a=t.localToGlobal(new s(r/2,i/2)),u=o.subtract(a),h=t.transform.matrix;h.translate(u.x,u.y),t.transform.matrix=h}},{key:"getAllChildren",value:function(t){if(!t)return null;for(var e=[],n=0;n<t.numChildren;n++)e.push(t.getChildAt(n));return e}},{key:"getFnName",value:function(t){var e=t.toString().replace(/[\s\?]*/g,""),n=e.length>=50?50:e.length,r=(e=e.substring(0,n)).match(/^function([^\(]+?)\(/);if(r&&r[1])return r[1];var i=t.caller.toString().replace(/[\s\?]*/g,""),o=i.indexOf(e);return(r=i.substring(o-30,o).match(/([^\=]+?)\=/))&&r[1]?r[1]:"anonymous"}},{key:"touchIsType",value:function(t,e){if(t===e)return!0;switch(e){case TouchEvent.TOUCH_BEGIN:return"touchstart"===t;case TouchEvent.TOUCH_MOVE:return"touchmove"===t;case TouchEvent.TOUCH_END:return"touchend"===t;case TouchEvent.TOUCH_END_OUDSIDE:return"touchendoutside"===t;case TouchEvent.TAP:return"tap"===t}return!1}},{key:"addDenyDB",value:function(e){h.addSingleArr(t.__bdArr,e)}},{key:"removeDenyDB",value:function(e){h.removeValueFromArray(t.__bdArr,e)}},{key:"_checkIsDBMC",value:function(e){return h.arrayContainsValue(t.__bdArr,e)}},{key:"addDomTouch",value:function(e,n,r,i){if(e&&n){var o="_M"+t.getUnique()+"_";return n.mc=e,n.this=r,e[o]=n,e[o].downTime=(new Date).getTime(),e[o].downP=new s,e[0]&&(e[0][o]=e[o]),i||(i={time:500,dis:15}),i&&(n.outData=i,n.outData.canTab=!0),n.tab&&(e[o+"touchTab"]=function(t){t.t="tab",this[o]&&(this[o].this?this[o].tab.call(this[o].this,t,this):this[o].tab.call(this,t,this))},e.on("click."+o+" touchend.tab"+o,e[o+"touchTab"])),e[o+"touchStart"]=function(e){if(this!==document&&t.checkValidMT(e)&&e.preventDefault(),this[o]){e.t="begin",this._isDown=!0;var n=void 0,r=void 0,i=!1;t._checkIsDBMC(this)&&(t.__isDenyDB=!0),this[o].dbtab&&(n=(new Date).getTime()-this[o].downTime,r=Math.abs(t.getPointLen(this[o].downP,t.getCanvasP(e))),n<300&&r<50&&(i=!0,this[o].this?this[o].dbtab.call(this[o].this,e,this):this[o].dbtab.call(this,e,this))),this[o].downTime=(new Date).getTime(),this[o].downP=t.getSPPoint(t.getMouseXY(e)),!i&&this[o].begin&&(!this[o].isAddDB||this[o].isAddDB&&!t.__isDenyDB)&&(this[o].this?this[o].begin.call(this[o].this,e,this):this[o].begin.call(this,e,this))}},e[o+"touchMove"]=function(e){if(this!==document&&t.checkValidMT(e)&&e.preventDefault(),e.t="move",this[o]){if(t._checkIsDBMC(this)&&(t.__isDenyDB=!0),this[o]&&(e.outData=this[o].outData,this[o].outData)){var n=Math.abs(t.getPointLen(this[o].downP,t.getMouseXY(e)));this[o].outData.dis&&n>this[o].outData.dis&&(this[o].outData.canTab=!1)}this._isDown&&this[o]&&this[o].move&&(!this[o].isAddDB||this[o].isAddDB&&!t.__isDenyDB)&&(this[o].this?this[o].move.call(this[o].this,e,this):this[o].move.call(this,e,this)),this[o]&&this[o].move2&&(!this[o].isAddDB||this[o].isAddDB&&!t.__isDenyDB)&&(this[o].this?this[o].move2.call(this[o].this,e,this):this[o].move2.call(this,e,this))}},e[o+"touchEnd"]=function(e){this!==document&&t.checkValidMT(e)&&e.preventDefault(),e.t="end",this[o]&&(this._isDown=!1,n.end&&(!this[o].isAddDB||this[o].isAddDB&&!t.__isDenyDB)&&(this[o].this?this[o].end.call(this[o].this,e,this):this[o].end.call(this,e,this)),this[o]&&this[o].isAddDB&&t.__isDenyDB&&(t.__isDenyDB=!1))},e.$addEventListener?(e.$addEventListener("mousemove",e[o+"touchMove"]),e.$addEventListener("touchmove",e[o+"touchMove"]),e.$addEventListener("mousedown",e[o+"touchStart"]),e.$addEventListener("touchstart",e[o+"touchStart"]),e.$addEventListener("mouseup",e[o+"touchEnd"]),e.$addEventListener("touchend",e[o+"touchEnd"])):(e.on("mousemove."+o+" touchmove."+o,e[o+"touchMove"]),e.on("mousedown."+o+" touchstart."+o,e[o+"touchStart"]),e.on("mouseup."+o+" touchend."+o,e[o+"touchEnd"])),o}}},{key:"removeDomTouch",value:function(t,e){t&&e&&(t[e+"touchTab"]&&(t.off("click."+e+" touchend.tab"+e,t[e+"touchTab"]),delete t[e+"touchTab"]),t.$removeEventListener?(t.$removeEventListener("mousemove",t[e+"touchMove"]),t.$removeEventListener("touchmove",t[e+"touchMove"]),t.$removeEventListener("mousedown",t[e+"touchStart"]),t.$removeEventListener("touchstart",t[e+"touchStart"]),t.$removeEventListener("mouseup",t[e+"touchEnd"]),t.$removeEventListener("touchend",t[e+"touchEnd"])):(t.off("mousedown."+e+" touchstart."+e,t[e+"touchStart"]),t.off("mousemove."+e+" touchmove."+e,t[e+"touchMove"]),t.off("mouseup."+e+" touchend."+e,t[e+"touchEnd"])),delete t[e+"touchStart"],delete t[e+"touchMove"],delete t[e+"touchEnd"],t[e]&&delete t[e])}},{key:"addSVGTouch",value:function(e,n,r,i){if(e&&n){var o="_MSVG"+t.getUnique()+"_";return r=void 0===r?e:r,n.this=r,n.mc=e,e.data(o,n),e.data("funcID",o),i||(i={time:300,dis:15}),i&&(n.outData=i,n.outData.canTab=!0),n._svg_tabFunc=function(t){var e=this.data("funcID"),n=this.data(e);t.t="tab",t.mc=this,n.tab.call(n.this,t)},n._svg_beginFunc=function(t){var e=this.data("funcID");this._isDown=!0;var n=this.data(e);t.t="begin",t.mc=this,n.begin.call(n.this,t)},n._svg_moveFunc=function(t){if(this._isDown){var e=this.data("funcID"),n=this.data(e);t.t="move",t.mc=this,n.move.call(n.this,t)}},n._svg_endFunc=function(t){var e=this.data("funcID"),n=this.data(e);this._isDown=!1,t.t="end",t.mc=this,n.end.call(n.this,t)},n.tab&&e.click(n._svg_tabFunc),t.isMobileBrowser()?(n.begin&&e.touchstart(n._svg_beginFunc),n.move&&e.touchmove(n._svg_moveFunc),n.end&&e.touchend(n._svg_endFunc)):(n.begin&&e.mousedown(n._svg_beginFunc),n.move&&e.mousemove(n._svg_moveFunc),n.end&&e.mouseup(n._svg_endFunc)),o}}},{key:"isMobileBrowser",value:function(){var t=!1;if(navigator){var e=navigator.userAgent;t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)}return t}},{key:"removeSVGTouch",value:function(t,e){if(t&&e){var n=t.data(e);n.tab&&t.unclick(n._svg_tabFunc),n.begin&&(t.untouchstart(n._svg_beginFunc),t.unmousedown(n._svg_beginFunc)),n.move&&(t.untouchmove(n._svg_moveFunc),t.unmousemove(n._svg_moveFunc)),n.end&&(t.untouchend(n._svg_endFunc),t.unmouseup(n._svg_endFunc)),t.data(e,null)}}},{key:"addTouch",value:function(e,n,r,i){if(n){var o="_M"+t.getUnique()+"_";return n.mc=e,n.this=r,e[o]=n,e[o].downTime=(new Date).getTime(),e[o].downP=new s,i||(i={time:300,dis:15}),i&&(n.outData=i,n.outData.canTab=!0),n.tab&&(e[o+"touchTab"]=function(e){if(e.t="tab",this[o]){if(this[o].outData){var n=(new Date).getTime()-this[o].downTime;this[o].outData.time>0&&this[o].outData.time&&n>this[o].outData.time&&(this[o].outData.canTab=!1)}(!this[o].outData||this[o].outData&&this[o].outData.canTab)&&(this[o].this?this[o].tab.call(this[o].this,e,this):this[o].tab.call(this,e,this)),this[o]&&this[o].outData&&(this[o].outData.canTab=!0,this[o].outData.downP=t.getSPPoint(t.getMouseXY(e)))}},e.addEventListener(TouchEvent.TOUCH_END,e[o+"touchTab"])),e[o+"touchStart"]=function(e){e.t="begin",this._isDown=!0;var n=void 0,r=void 0,i=!1;t._checkIsDBMC(this)&&(t.__isDenyDB=!0),this[o].dbtab&&(n=(new Date).getTime()-this[o].downTime,r=Math.abs(t.getPointLen(this[o].downP,t.getMouseXY(e))),n<300&&r<50&&(i=!0,this[o].this?this[o].dbtab.call(this[o].this,e,this):this[o].dbtab.call(this,e,this))),this[o].downTime=(new Date).getTime(),this[o].downP=t.getSPPoint(t.getMouseXY(e)),!i&&this[o].begin&&(this[o].this?this[o].begin.call(this[o].this,e,this):this[o].begin.call(this,e,this))},e.addEventListener(TouchEvent.TOUCH_BEGIN,e[o+"touchStart"]),e[o+"touchMove"]=function(e){if(e.t="move",this._isDown){if(t._checkIsDBMC(this)&&(t.__isDenyDB=!0),e.outData=this[o].outData,this[o].outData){var n=Math.abs(t.getPointLen(this[o].downP,t.getMouseXY(e)));this[o].outData.dis&&n>this[o].outData.dis&&(this[o].outData.canTab=!1)}this[o].move&&(this[o].this?this[o].move.call(this[o].this,e,this):this[o].move.call(this,e,this))}},e.addEventListener(TouchEvent.TOUCH_MOVE,e[o+"touchMove"]),e[o+"touchEnd"]=function(t){t.t="end",this._isDown=!1,n.end&&(this[o].this?this[o].end.call(this[o].this,t,this):this[o].end.call(this,t,this))},e.addEventListener(TouchEvent.TOUCH_END,e[o+"touchEnd"]),e.addEventListener(TouchEvent.TOUCH_END_OUTSIDE,e[o+"touchEnd"]),o}}},{key:"removeTouch",value:function(t,e){if(t&&e){if(t[e]){var n=t[e],r=!0,i=!1,o=void 0;try{for(var a,s=Object.keys(n)[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)n[a.value]=null}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}delete t[e],t[e+"touchTab"]&&(t.removeEventListener(TouchEvent.TOUCH_END,t[e+"touchTab"]),delete t[e+"touchTab"]),t.removeEventListener(TouchEvent.TOUCH_BEGIN,t[e+"touchStart"]),delete t[e+"touchStart"],t.removeEventListener(TouchEvent.TOUCH_MOVE,t[e+"touchMove"]),delete t[e+"touchMove"],t[e+"touchEnd"]&&(t.removeEventListener(TouchEvent.TOUCH_END,t[e+"touchEnd"]),t.removeEventListener(TouchEvent.TOUCH_END_OUTSIDE,t[e+"touchEnd"]),delete t[e+"touchEnd"]),t[e]&&(t[e].this=null)}}},{key:"vec2Length",value:function(t){return Math.sqrt(t.get_x()*t.get_x()+t.get_y()*t.get_y())}},{key:"vec3Length",value:function(t){return Math.sqrt(t.zpp_inner.x*t.zpp_inner.x+t.zpp_inner.y*t.zpp_inner.y+t.zpp_inner.z*t.zpp_inner.z)}},{key:"getRayPoint",value:function(t,e,n){var r=s.interpolate(e,t,1/s.distance(t,e));return new s(t.x+(r.x-t.x)*n,t.y+(r.y-t.y)*n)}},{key:"addDrag",value:function(e,n,r,i,o){i||(i=e),n&&void 0===r.dragRectEnable&&(r.dragRectEnable=n&&n.width>=0&&n.height>=0);var a=t.addTouch(e,{begin:function(n){e[a+"_dragData"].isDown=!0,t.setSPPoint(e[a+"_dragData"].p,t.getMouseXY(n)),r&&r.begin&&r.begin.call(i,n)},move:function(o){if(e[a+"_dragData"].isDown){var s=t.getMouseXY(o).x-e[a+"_dragData"].p.x,u=t.getMouseXY(o).y-e[a+"_dragData"].p.y;if(e.getMScale){var h=e.getMScale();s/=h.x,u/=h.y}var l=e.x+s,c=e.y+u;r&&r.dragRectEnable&&(l=t.range(l,n.x,n.x+n.width),c=t.range(c,n.y,n.y+n.height)),e[a].isLock||e.x===l&&e.y===c||(t.setSPPointXY(e,l,c),t.setSPPoint(e[a+"_dragData"].p,t.getMouseXY(o)),r&&r.move&&(o.chaX=s,o.chaY=u,r.move.call(i,o)))}},end:function(t){e[a+"_dragData"].isDown=!1,r&&r.end&&r.end.call(i,t)},tab:function(t){r&&r.tab&&r.tab.call(i,t)},dbtab:function(t){r&&r.dbtab&&r.dbtab.call(i,t)}},i,o);return e[a+"_dragData"]={p:new s(0,0)},a}},{key:"removeDrag",value:function(e,n){delete e[n+"_dragData"],t.removeTouch(e,n)}},{key:"setButton",value:function(e,n,r){if(!e.totalFrames)throw new Error("it is not MovieClip");if(2!==e.totalFrames)throw new Error("totalFrames is not equals 2");e.____setButton_touchID=t.addTouch(e,{begin:function(t){this.currentFrame=1},end:function(t){this.currentFrame=0},tab:function(t){n&&(r?n.call(r,{target:this}):n.call(this,{target:this}))}},null,{time:-1})}},{key:"removeButton",value:function(e){e&&t.removeTouch(e,e.____setButton_touchID)}},{key:"setToggle",value:function(e,n,r){e.data=n,e.data.target=e;var i=r||e;e.toggled&&(e.x+=e.data.w),t.addTouch(e,{tab:function(t){e.data.toggled=!e.data.toggled,e.data.toggled?e.x+=e.data.w:e.x-=e.data.w,e.data.toggle&&e.data.toggle.call(i,e.data.toggled)}})}},{key:"writeTxt",value:function(t,e){var n=new Blob([e],{type:"text/plain;charset=utf-8"});FileSaver.saveAs(n,t)}},{key:"setObjProperties",value:function(t,e){for(var n in e)t[n]=e[n]}},{key:"getAbsoluteUrl",value:function(t){var e=document.createElement("A");return e.href=t,e.href}},{key:"drawDashed",value:function(e,n,r,i,o){i||(i=5),o||(o=5);for(var a=t.getPointLen(n,r),u=0,h=void 0,l=void 0;u<a;)h=s.interpolate(r,n,u/a),(u+=i)>a&&(u=a),l=s.interpolate(r,n,u/a),e.moveTo(h.x,h.y),e.lineTo(l.x,l.y),u+=o}},{key:"drawDashedRect",value:function(e,n,r,i,o,a,s){t.drawDashed(e,n,r,a,s),t.drawDashed(e,r,i,a,s),t.drawDashed(e,i,o,a,s),t.drawDashed(e,o,n,a,s)}},{key:"drawSVGDashed",value:function(e,n,r,i){r||(r=5),i||(i=5);for(var o=t.getPointLen(e,n),a=0,u=void 0,h=void 0,l="";a<o;)u=s.interpolate(n,e,a/o),(a+=r)>o&&(a=o),h=s.interpolate(n,e,a/o),l+="M"+u.x+" "+u.y,l+="L"+h.x+" "+h.y,a+=i;return l}},{key:"drawSVGDashedRect",value:function(e,n,r,i,o,a){var s="";return s+=t.drawSVGDashed(e,n,o,a),s+=t.drawSVGDashed(n,r,o,a),(s+=t.drawSVGDashed(r,i,o,a))+t.drawSVGDashed(i,e,o,a)}},{key:"parseXML",value:function(t){return(new l).parseXML(t)}},{key:"removeAllChild",value:function(t){if(t&&t.children.length)for(;t.children.length>0;)t.removeChildAt(0)}},{key:"get_quadraticCurveTo_points",value:function(t,e,n,r,i,o){for(var a=void 0,u=void 0,h=[],l=t,c=e,v=0,f=1;f<=20;++f)a=l+(n-l)*(v=f/20),u=c+(r-c)*v,h.push(new s(a+(n+(i-n)*v-a)*v,u+(r+(o-r)*v-u)*v));return h}},{key:"extends",value:function(t,e){t.prototype=Object.create(e.prototype),t.constructor=t}},{key:"range",value:function(t,e,n){return t=Math.max(e,t),Math.min(n,t)}},{key:"getValidAngle",value:function(t){var e=Math.abs(t);return t<0?360*Math.floor(e/360+1)+t:0===e?0:e%360}},{key:"angleSplitLine",value:function(t,e,n,r){var i=new s(e.x-t.x,e.y-t.y),o=new s(r.x-n.x,r.y-n.y),a=Math.sqrt(i.x*i.x+i.y*i.y),u=Math.sqrt(o.x*o.x+o.y*o.y),h=new s(1/a*i.x,1/a*i.y),l=new s(1/u*o.x,1/u*o.y);return new s(h.x+l.x,h.y+l.y)}},{key:"getValidHu",value:function(e){return t.toHu(t.getValidAngle(t.toAngle(e)))}},{key:"stopPropagation",value:function(e){var n=function(t){t.stopPropagation()};t.addTouch(e,{tab:n,begin:n,move:n,end:n})}},{key:"GetObjPos",value:function(t){var e=t,n=new s(e.offsetLeft-e.scrollLeft,e.offsetTop-e.scrollTop);for(e=e.offsetParent;e;)n.x+=e.offsetLeft-e.scrollLeft,n.y+=e.offsetTop-e.scrollTop,e=e.offsetParent;return n}},{key:"containsPoint",value:function(t,e){return!!t.getBounds().contains(e.x,e.y)}},{key:"getMouseXY",value:function(t,e,n){void 0===e&&(e=0),n||(n="changedTouches");var r=void 0;if(t.data&&t.data.global)r=t.data.global;else if(void 0===t.clientX){var i=void 0;t[n]?(i=this.getIndexFromIdentifier(t[n],e),r=new s(t[n][i].clientX,t[n][i].clientY)):(i=this.getIndexFromIdentifier(t.originalEvent[n],e),r=new s(t.originalEvent[n][i].clientX,t.originalEvent[n][i].clientY))}else r=new s(t.clientX,t.clientY);return r.clone()}},{key:"getIndexFromIdentifier",value:function(t,e){var n=0;for(n=0;n<t.length;n++)if(e===t[n].identifier)return n;return 0}},{key:"getCanvasPToMouseP",value:function(e){var n=t.getCanvasP(e),r={data:{}};return r.data.global=new s(n.x,n.y),r.type=e.type,r}},{key:"getMousePToCanvasP",value:function(e){var n=t.getMouseXY(e),r=$("#canvasID").offset(),i=new s(r.left,r.top),o=nb.PhysicsMain.ToolScale,a=new s(n.x*o,n.y*o);a.x+=i.x,a.y+=i.y;var u={data:{}};return u.data.global=new s(a.x,a.y),u.type=e.type,u}},{key:"getCanvasP",value:function(e,n,r){var i=$("#canvasID").offset(),o=new s(i.left,i.top),a=t.getMouseXY(e,n,r),u=new s(a.x-o.x,a.y-o.y);return u.x=u.x/nb.PhysicsMain.ToolScale,u.y=u.y/nb.PhysicsMain.ToolScale,u}},{key:"getCanvasP_sdk",value:function(e,n,r){var i=new s(0,0),o=t.getMouseXY(e,n,r);return new s(o.x-i.x,o.y-i.y)}},{key:"os",value:function(){var t=navigator.userAgent.toLowerCase();return{isIpad:/ipad/.test(t),isIphone:/iphone os/.test(t),isAndroid:/android/.test(t),isWindowsCe:/windows ce/.test(t),isWindowsMobile:/windows mobile/.test(t),isWin2K:/windows nt 5.0/.test(t),isXP:/windows nt 5.1/.test(t),isVista:/windows nt 6.0/.test(t),isWin7:/windows nt 6.1/.test(t),isWin8:/windows nt 6.2/.test(t),isWin81:/windows nt 6.3/.test(t),isWinPC:/windows nt/.test(t)}}},{key:"RGBToHex",value:function(t){var e=t;if(/^(rgb|RGB)/.test(e)){for(var n=e.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),r="",i=0;i<n.length;i++){var o=Number(n[i]).toString(16);1===o.length&&(o="0"+o),r+=o}return r}if(!/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e))return e;var a=e.replace(/#/,"").split("");if(6===a.length)return e;if(3===a.length){for(var s="",u=0;u<a.length;u+=1)s+=a[u]+a[u];return s}}},{key:"isColorDeep",value:function(e){var n=t.retrieveRGBComponent(e);return!(.299*n[0]+.587*n[1]+.114*n[2]>=192)}},{key:"getDomColor",value:function(t){return"#"+Number(t).toString(16)}},{key:"linePath",value:function(t,e,n){if(void 0===n&&(n=!0),!t||!e||e.length<3)return null;t.moveTo(e[0].x,e[0].y);var r=void 0,i=e.length;for(r=1;r<i;r++)t.lineTo(e[r].x,e[r].y);return n&&t.lineTo(e[0].x,e[0].y),t}},{key:"getRoundP",value:function(e,n,r){var i=t.getXianDianByDis(10,!0,n,e),o=t.getXianDianByDis(10,!0,n,r);return t.toHu(t.getAngleByP(e,n,r)),[e,i,o,r]}},{key:"addTicker",value:function(t,e,n){void 0===n&&(n=!0);var r=window.PIXI,i=void 0;return r&&((i=new r.ticker.Ticker).$this=e,i.add(function(e){i.$this?t.call(i.$this):t()}),n&&i.start()),i}},{key:"removeTicker",value:function(t){t&&(t.stop(),t.$this=null,delete t.$this,t=null)}},{key:"delayCallFunc",value:function(e,n,r,i){void 0===i&&(i=50),r||(r=this),e.call(r)?n.call(r):setTimeout(function(){t.delayCallFunc(e,n,r,i)},i)}},{key:"makeOrStr",value:function(t,e){var n=void 0,r=void 0,i=e.length,o=t.length,a="",s=void 0,u=void 0;for(n=0;n<i;n++){for(r=0;r<o;r++)s=t.charCodeAt(r),u=e.charCodeAt(n)^s;a+=String.fromCharCode(u)}return a}},{key:"standardletiance",value:function(t){var e=void 0,n=t.length,r=0;for(e=0;e<n;e++)r+=t[e];var i=r/n,o=0;for(e=0;e<n;e++){var a=t[e]-i;o+=a*a}var s=o/n;return Math.sqrt(s)}},{key:"hitTestPoint",value:function(t,e,n){var r=t.getBounds();return n||(e=t.toGlobal(e)),r.contains(e.x,e.y)}},{key:"alignPivot",value:function(t,e,n){var r=e||"center",i=n||"center";"left"===r?t.pivot.x=0:"center"===r?t.pivot.x=t.width/2:"right"===r&&(t.pivot.x=t.width),"top"===i?t.pivot.y=0:"center"===i?t.pivot.y=t.height/2:"bottom"===i&&(t.pivot.y=t.height)}},{key:"clone",value:function(e){if(null===e||"object"!==(void 0===e?"undefined":o(e)))return e;if(e instanceof Date){var n=new Date;return n.setTime(e.getTime()),n}if(e instanceof Array){var r=[],i=void 0,a=e.length;for(i=0;i<a;++i)r[i]=t.clone(e[i]);return r}if(e instanceof Object){var s={};for(var u in e)e.hasOwnProperty(u)&&(s[u]=t.clone(e[u]));return s}throw new Error("Unable to copy obj! Its type isn't supported.")}},{key:"equals",value:function(e,n){if(e===n)return!0;if(void 0===n||null===n||"object"!==(void 0===n?"undefined":o(n)))return!1;var r=0,i=0;for(var a in e)r++;for(var s in n)i++;if(r!==i)return!1;if(n.constructor===e.constructor){for(var u in e)if("object"===o(e[u])){if(!t.equals(e[u],n[u]))return!1}else if("function"==typeof e[u]){if(!t.equals(e[u].toString(),n[u].toString()))return!1}else if(e[u]!==n[u])return!1;return!0}return!1}},{key:"getFirstChildren",value:function(t){for(var e=[],n=t.getElementsByTagName("*"),r=0,i=n.length;r<i;++r)if(1===n[r].nodeType){var o=n[r].parentNode;1===o.nodeType?o===t&&(e[e.length]=n[r]):o.parentNode===t&&(e[e.length]=n[r])}return e}},{key:"setInputReg",value:function(t,e){var n=this;$("#"+t).keyup(function(t){var r=n.value.replace(e,"");$(n).val(r)})}},{key:"debounce",value:function(t,e,n,r){void 0===e&&(e=250);var i=void 0,o=r||this;return function(){var r=o||this,a=arguments,s=n&&!i;clearTimeout(i),i=setTimeout(function(){i=null,n||t.apply(r,a)},e),s&&t.apply(r,a)}}},{key:"getAddPIXIBMP",value:function(t,e){if(!t||!t.children||!e||0===e.length)return null;var n=null;return each(t.children,function(t,r){if(r&&r._nbData_&&r._nbData_.libName===e)return n=r,!1}),n}},{key:"checkValidMT",value:function(t){return!t.type||t.type.indexOf("touch")>-1}},{key:"fullScreen",value:function(){var t=document.documentElement,e=t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullScreen;if(void 0!==e&&e)e.call(t);else if(void 0!==window.ActiveXObject){var n=new ActiveXObject("WScript.Shell");null!==n&&n.SendKeys("{F11}")}}},{key:"exitFullScreen",value:function(){var t=document,e=t.cancelFullScreen||t.webkitCancelFullScreen||t.mozCancelFullScreen||t.exitFullScreen;if(void 0!==e&&e)e.call(t);else if(void 0!==window.ActiveXObject){var n=new ActiveXObject("WScript.Shell");null!==n&&n.SendKeys("{F11}")}}},{key:"listenFullscreen",value:function(t,e){var n=void 0!==e?e:this,r=document.documentElement;r.requestFullscreen?document.addEventListener("fullscreenchange",function(){t.call(n,document.fullscreen)},!1):r.mozRequestFullScreen?document.addEventListener("mozfullscreenchange",function(){t.call(n,document.mozFullScreen)},!1):r.webkitRequestFullscreen?document.addEventListener("webkitfullscreenchange",function(){t.call(n,document.webkitIsFullScreen)},!1):r.msRequestFullscreen&&document.addEventListener("msfullscreenchange",function(){t.call(n,document.msFullscreenElement)},!1)}},{key:"setRopePoints",value:function(t,e){t.points=e,t.vertices=new Float32Array(4*e.length),t.uvs=new Float32Array(4*e.length),t.colors=new Float32Array(2*e.length),t.indices=new Uint16Array(2*e.length),(t._refresh||t.refresh).call(t)}},{key:"checkIsWinXP",value:function(){var t="Win32"===navigator.platform||"Windows"===navigator.platform,e=!1,n=navigator.userAgent;return t&&(e=n.indexOf("Windows NT 5.1")>-1||n.indexOf("Windows Xp")>-1),e}},{key:"checkIsIE",value:function(){return!!window.ActiveXObject||"ActiveXObject"in window}},{key:"killTweenMax",value:function(e,n){if(e)if(e instanceof Array)for(;e.length;)t.killTweenMax(e.pop());else if(TweenMax.killTweensOf(e.target,!1,null),!n){for(var r in e.prevNode=null,e.nextNode=null,e.target=null,e.vars)e.vars[r].this&&(e.vars[r].this=null),e.vars[r]=null;e.data=null,e=null}}},{key:"getObjFromJsonStr",value:function(t){var e=null;try{var n="[object String]"===Object.prototype.toString.call(t)?JSON.parse(t):t;"[object Object]"===Object.prototype.toString.call(n)&&(e=n)}catch(t){e=null}return e}}]),t}();c.MIN=1e-6,c.__bdArr=[],c.__isDenyDB=!1,e.exports=c},{"./ArrayUtil":1,"./NumberUtilities":8,"./ObjTree":9,"./Point":10,"./Rectangle":11}],6:[function(t,e,n){var r=function(){function t(){i(this,t),this.ERROR_MATRIX_NOT_SQUARE="Matrix must be square.",this.ERROR_VECTOR_NOT_2D="Only two dimensional operations are supported at this time."}return a(t,null,[{key:"_check2DVector",value:function(t){if(2!==t.length)throw new Error(this.ERROR_VECTOR_NOT_2D)}},{key:"deepCopy",value:function(t){if(!Array.isArray(t))throw new Error("Input must be a Matrix.");if(void 0===t[0][0])throw new Error("Input cannot be a vector.");for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=t[n].slice();return e}},{key:"isSquare",value:function(t){if(!Array.isArray(t))throw new Error("Input must be a Matrix.");if(void 0===t[0][0])throw new Error("Input cannot be a vector.");for(var e=t.length,n=0;n<e;n++)if(t[n].length!==e)return!1;return!0}},{key:"addition",value:function(t,e){if(t.length!==e.length||t[0].length!==e[0].length)throw new Error("Matrix mismatch");var n=new Array(t.length),r=void 0;if(t[0].length)for(r=0;r<t.length;r++){n[r]=new Array(t[r].length);for(var i=0;i<t[r].length;i++)n[r][i]=t[r][i]+e[r][i]}else for(r=0;r<t.length;r++)n[r]=t[r]+e[r];return n}},{key:"traceMatrix",value:function(t){var e=void 0,n=void 0;if(t[0].length)for(e=0;e<t.length;e++){n="";for(var r=0;r<t[e].length;r++)n+=t[e][r]+"\t";console.log(n)}else{for(n="",e=0;e<t.length;e++)n+=t[e]+"\t";console.log(n)}}},{key:"subtraction",value:function(t,e){if(t.length!==e.length||t[0].length!==e[0].length)throw new Error("Matrix mismatch");var n=new Array(t.length),r=void 0;if(t[0].length)for(r=0;r<t.length;r++){n[r]=new Array(t[r].length);for(var i=0;i<t[r].length;i++)n[r][i]=t[r][i]-e[r][i]}else for(r=0;r<t.length;r++)n[r]=t[r]-e[r];return n}},{key:"scalar",value:function(t,e){for(var n=0;n<t.length;n++)for(var r=0;r<t[n].length;r++)t[n][r]=e*t[n][r];return t}},{key:"transpose",value:function(t){for(var e=new Array(t[0].length),n=0;n<t[0].length;n++){e[n]=new Array(t.length);for(var r=0;r<t.length;r++)e[n][r]=t[r][n]}return e}},{key:"identity",value:function(t){for(var e=new Array(t),n=0;n<t;n++){e[n]=new Array(t);for(var r=0;r<t;r++)e[n][r]=n===r?1:0}return e}},{key:"dotproduct",value:function(t,e){if(t.length!==e.length)throw new Error("Vector mismatch");for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[r];return n}},{key:"multiply",value:function(e,n){if(e[0].length!==n.length)throw new Error("Matrix mismatch");for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=new Array(n[0].length);for(var o=t.transpose(n),a=0;a<r.length;a++)for(var s=0;s<r[a].length;s++)r[a][s]=t.dotproduct(e[a],o[s]);return r}},{key:"determinant",value:function(e){var n=e.length,r=e[0].length,i=0,o=void 0,a=void 0,s=void 0,u=void 0;if(!t.isSquare(e))throw new Error(this.ERROR_MATRIX_NOT_SQUARE);if(1===n)return e[0][0];if(2===n)return e[0][0]*e[1][1]-e[0][1]*e[1][0];for(a=0;a<r;a++){for(s=e[0][a],u=e[0][a],o=1;o<n;o++)u*=e[o][((a+o)%r+r)%r],s*=e[o][((a-o)%r+r)%r];i+=u-s}return i}},{key:"lupDecomposition",value:function(e){if(!t.isSquare(e))throw new Error(this.ERROR_MATRIX_NOT_SQUARE);var n=e.length,r=t.deepCopy(e),i=t.transpose(t.identity(n)),o=void 0,a=new Array(n);this.getL=function(e){for(var n=e[0].length,r=t.identity(n),i=0;i<n;i++)for(var o=0;o<n;o++)i>o&&(r[i][o]=e[i][o]);return r},this.getU=function(e){for(var n=e[0].length,r=t.identity(n),i=0;i<n;i++)for(var o=0;o<n;o++)i<=o&&(r[i][o]=e[i][o]);return r};for(var s=0;s<n;s++){var u=void 0;for(u=0;u<n;u++)a[u]=r[u][s];for(u=0;u<n;u++){o=r[u];for(var h=Math.min(u,s),l=0,c=0;c<h;c++)l+=o[c]*a[c];o[s]=a[u]-=l}var v=s;for(u=s+1;u<n;u++)Math.abs(a[u])>Math.abs(a[v])&&(v=u);if(v!==s&&(r=t.rowSwitch(r,v,s),i=t.rowSwitch(i,v,s)),s<n&&0!==r[s][s])for(u=s+1;u<n;u++)r[u][s]/=r[s][s]}return[this.getL(r),this.getU(r),i]}},{key:"rotate",value:function(e,n,r){t._check2DVector(e);var i="clockwise"===r?-1:1,o=n*(Math.PI/180),a=[[Math.cos(o),-1*i*Math.sin(o)],[i*Math.sin(o),Math.cos(o)]];return t.multiply(a,e)}},{key:"scale",value:function(e,n,r){t._check2DVector(e);var i=[[n,0],[0,r]];return t.multiply(i,e)}},{key:"shear",value:function(e,n,r){t._check2DVector(e);var i=[[1,"xaxis"===r?n:0],["yaxis"===r?n:0,1]];return t.multiply(i,e)}},{key:"affine",value:function(e,n,r){t._check2DVector(e);var i=[[1,0,n],[0,1,r],[0,0,1]],o=[[e[0][0]],[e[1][0]],[1]],a=t.multiply(i,o);return[[a[0][0]],[a[1][0]]]}},{key:"rowScale",value:function(t,e,n){for(var r=new Array(t.length),i=0;i<t.length;i++){r[i]=new Array(t[i].length);for(var o=0;o<t[i].length;o++)r[i][o]=i===e?n*t[i][o]:t[i][o]}return r}},{key:"rowSwitch",value:function(t,e,n){for(var r=new Array(t.length),i=0;i<t.length;i++){r[i]=new Array(t[i].length);for(var o=0;o<t[i].length;o++)r[i][o]=i===e?t[n][o]:i===n?t[e][o]:t[i][o]}return r}},{key:"rowAddMultiple",value:function(t,e,n,r){for(var i=new Array(t.length),o=0;o<t.length;o++){i[o]=new Array(t[o].length);for(var a=0;a<t[o].length;a++)o===n?i[n][a]=t[n][a]+r*t[e][a]:i[o][a]=t[o][a]}return i}},{key:"GaussJordanEliminate",value:function(t,e){for(var n=void 0===e?1e-10:e,r=t.length,i=t[0].length,o=-1,a=void 0,s=void 0,u=void 0;++o<r;){var h=o;for(a=o;++a<r;)Math.abs(t[a][o])>Math.abs(t[h][o])&&(h=a);var l=t[o];if(t[o]=t[h],t[h]=l,Math.abs(t[o][o])<=n)return t;for(a=o;++a<r;)for(u=t[a][o]/t[o][o],s=o-1;++s<i;)t[a][s]-=t[o][s]*u}for(o=r;--o>=0;){for(u=t[o][o],a=-1;++a<o;)for(s=i;--s>=o;)t[a][s]-=t[o][s]*t[a][o]/u;for(t[o][o]/=u,s=r-1;++s<i;)t[o][s]/=u}return t}},{key:"rowReduce",value:function(e,n){return t.GaussJordanEliminate(e,n)}},{key:"inverse",value:function(e){if(!t.isSquare(e))throw new Error(this.ERROR_MATRIX_NOT_SQUARE);var n=e.length,r=t.identity(n),i=void 0;for(i=0;i<n;i++)e[i]=e[i].concat(r[i]);for(e=t.GaussJordanEliminate(e),i=0;i<n;i++)e[i]=e[i].slice(n);return e}},{key:"getCol",value:function(t,e){var n=new Array(t.length);if(e<0)throw new Error("The specified column must be a positive integer.");if(e>=t[0].length)throw new Error("The specified column must be between 0 and the number of columns - 1.");for(var r=0;r<t.length;r++)n[r]=t[r][e];return n}},{key:"reorderRows",value:function(t,e){var n=[];if(void 0===e)throw new Error("A reordering array must be entered.");if(e.length!==t.length)throw new Error("The reordered matrix must have the same number of rows as the original Matrix.");for(var r=0;r<e.length;r++){if(e[r]<0)throw new Error("The desired order of the rows must be positive integers.");if(e[r]>=e.length)throw new Error("The desired order of the rows must start at 0 and end at the number of rows - 1.");n.push(t[e[r]])}return n}},{key:"reorderCols",value:function(e,n){var r=[];if(void 0===n)throw new Error("Please enter a desired reordering array.");if(n.length!==e[0].length)throw new Error("The reordered matrix must have the same number of columns as the original Matrix.");for(var i=0;i<n.length;i++){if(n[i]<0)throw new Error("The desired order of the columns must be positive integers.");if(n[i]>=n.length)throw new Error("The desired order of the columns must start at 0 and end at the number of columns - 1.");r.push(t.getCol(e,n[i]))}return t.transpose(r)}},{key:"reverseRows",value:function(e){for(var n=[],r=e.length-1;r>-1;r--)n.push(r);return t.reorderRows(e,n)}},{key:"reverseCols",value:function(e){for(var n=[],r=e.length-1;r>-1;r--)n.push(r);return t.reorderCols(e,n)}},{key:"zeros",value:function(t,e){var n=new Array(t);if(t<1||e<1)throw new Error("The matrix dimensions must be positive integers.");t=Math.ceil(t),e=Math.ceil(e);for(var r=0;r<t;r++){for(var i=new Array(e),o=0;o<e;o++)i[o]=0;n[r]=i}return n}},{key:"zigzag",value:function(e,n,r){if(e<=1)throw new Error("Matrix size must be at least 2x2.");e=Math.ceil(e);var i=t.zeros(e,e),o=function(t){var n=!1,r=e*e,i=1,o=1,a=void 0,s=void 0,u=void 0,h=void 0,l=void 0;for(t[0][0]=r,t[e-1][e-1]=i,h=1;h<e;h++)n?(r-=4*o,i+=4*o,o++):(r--,i++),t[0][h]=r,t[e-1][e-1-h]=i,n=!n;var c=!0;for(h=1;h<e;h++){for(s=h,u=t[a=0][s],l=1;l<h+1;l++)c?u-=1:u+=1,s--,t[++a][s]=u;c=!c}for(c=e%2==0,h=1;h<e-1;h++){for(s=h,u=t[a=e-1][s],l=1;l<e-h;l++)c?u--:u++,s++,t[--a][s]=u;c=!c}return t},a=function(e){return t.transpose(o(e))},s=function(e){return t.reverseCols(o(e))},u=function(e){return t.reverseCols(t.reverseRows(o(e)))},h=function(e){return t.transpose(u(e))};if("BR"===n&&"H"===r)return o(i);if("BR"===n&&"V"===r)return a(i);if("BL"===n&&"H"===r)return s(i);if("BL"===n&&"V"===r)return function(e){return t.reverseRows(h(s(e)))}(i);if("TR"===n&&"H"===r)return function(e){return t.reverseRows(o(e))}(i);if("TR"===n&&"V"===r)return function(e){return t.reverseRows(a(e))}(i);if("TL"===n&&"H"===r)return u(i);if("TL"===n&&"V"===r)return h(i);throw new Error("Enter the direction (V,H) and corner (BR,BL,TR,TL) correctly.")}},{key:"vectorNorm",value:function(t,e){if(!Array.isArray(t)||0===t.length)throw new Error("Vector must be an array of at least length 1.");if(void 0!==e&&"number"!=typeof e)throw new Error("Norm order must be a number.");e=void 0===e?2:e;var n=t.length,r=0,i=void 0,o=void 0;switch(e){case 1/0:for(o=0;o<n;o++)(i=Math.abs(t[o]))>r&&(r=i);break;case-1/0:for(r=1/0,o=0;o<n;o++)(i=Math.abs(t[o]))<r&&(r=i);break;default:for(o=0;o<n;o++)r+=Math.pow(Math.abs(t[o]),e);r=Math.pow(r,1/e)}return r}},{key:"matrixNorm",value:function(t,e){if(!Array.isArray(t)||0===t.length||!Array.isArray(t[0]))throw new Error("Matrix must be an array of at least length 1.");if(void 0!==e&&"number"!=typeof e&&null!==e)throw new Error("Norm order must be a number or null.");e=void 0===e?null:e;var n=t.length,r=t[0].length,i=0,o=void 0,a=void 0,s=void 0;switch(e){case 1/0:for(a=0;a<n;a++){for(o=0,s=0;s<r;s++)o+=Math.abs(t[a][s]);o>i&&(i=o)}break;case-1/0:for(i=1/0,a=0;a<n;a++){for(o=0,s=0;s<r;s++)o+=Math.abs(t[a][s]);o<i&&(i=o)}break;case 1:for(a=0;a<r;a++){for(o=0,s=0;s<n;s++)o+=Math.abs(t[s][a]);o>i&&(i=o)}break;case-1:for(i=1/0,a=0;a<r;a++){for(o=0,s=0;s<n;s++)o+=Math.abs(t[s][a]);o<i&&(i=o)}break;case null:for(a=0;a<n;a++)for(s=0;s<r;s++)i+=Math.pow(t[a][s],2);i=Math.pow(i,.5);break;case 2:case-2:throw new Error("Singular values are not yet supported in numbers.js.");default:for(a=0;a<n;a++)for(s=0;s<r;s++)i+=Math.pow(Math.abs(t[a][s]),e);i=Math.pow(i,1/e)}return i}},{key:"isUpperBand",value:function(t,e){if(!Array.isArray(t)||!Array.isArray(t[0])||t.length<2)throw new Error("Matrix must be an array of at least dimension 2.");if("number"!=typeof e||e<0||e%1!=0)throw new Error("Upper bandwidth must be a nonzero integer.");for(var n=!0,r=t[0].length,i=0,o=e+1;o<r;o++){if(0!==t[i][o]){n=!1;break}i++}return n}},{key:"isLowerBand",value:function(t,e){if(!Array.isArray(t)||!Array.isArray(t[0])||t.length<2)throw new Error("Matrix must be an array of at least dimension 2.");if("number"!=typeof e||e<0||e%1!=0)throw new Error("Lower bandwidth must be a nonzero integer.");for(var n=!0,r=t.length,i=0,o=e+1;o<r;o++){if(0!==t[o][i]){n=!1;break}i++}return n}},{key:"isRowDD",value:function(e){var n=e.length;if(!t.isSquare(e))throw new Error(this.ERROR_MATRIX_NOT_SQUARE);for(var r=0;r<n;r++){var i=e[r],a=i[r],s=o(i,r);if(Math.abs(a)<s)return!1}return!0}},{key:"isStrictlyRowDD",value:function(e){if(!t.isSquare(e))throw new Error(this.ERROR_MATRIX_NOT_SQUARE);for(var n=e.length,r=0;r<n;r++){var i=e[r],a=i[r],s=o(i,r);if(Math.abs(a)<=s)return!1}return!0}},{key:"isColumnDD",value:function(e){if(!t.isSquare)throw new Error(this.ERROR_MATRIX_NOT_SQUARE);for(var n=e.length,r=0;r<n;r++){var i=t.getCol(e,r),a=i[r],s=o(i,r);if(Math.abs(a)<s)return!1}return!0}},{key:"isStrictlyColumnDD",value:function(e){if(!t.isSquare(e))throw new Error(this.ERROR_MATRIX_NOT_SQUARE);for(var n=e.length,r=0;r<n;r++){var i=t.getCol(e,r),a=i[r],s=o(i,r);if(Math.abs(a)<=s)return!1}return!0}}]),t}();r.clone=r.deepCopy,r.add=r.addition;var o=function(t,e){var n=0,r=void 0;for(r=0;r<e;r++)n+=Math.abs(t[r]);for(r=e+1;r<t.length;r++)n+=Math.abs(t[r]);return n};e.exports=r},{}],7:[function(t,e,n){var r=function(){function t(e,n){i(this,t),this._m=[],this._isError=!1,this._errorMes="",this._det=0,this._rows=e,this._columns=n,Object.defineProperty(this,"isError",{get:function(){return this._isError},set:function(t){this._isError=t}}),Object.defineProperty(this,"errorMes",{get:function(){return this._errorMes},set:function(t){this._errorMes=t}}),Object.defineProperty(this,"detMultiplier",{get:function(){return this._det}}),Object.defineProperty(this,"rows",{get:function(){return this._rows}}),Object.defineProperty(this,"columns",{get:function(){return this._columns}}),Object.defineProperty(this,"m",{get:function(){return this._m}});var r=e*n,o=void 0;for(o=0;o<r;o++)this._m.push(0)}return a(t,[{key:"identity",value:function(){if(this._isError=!1,this._errorMes="",this._rows!=this._columns)return this._isError=!0,void(this._errorMes="Number of rows doesn't match number of columns");var t=void 0,e=void 0;for(t=0;t<this._rows;t++)for(e=0;e<this._columns;e++)this._m[e+t*this._columns]=t==e?1:0}},{key:"multiply",value:function(e){if(this._isError=!1,this._errorMes="",this._columns!=e.rows)return this._isError=!0,void(this._errorMes="Number of columns of the first matrix doesn't match with number of rows of the second matrix");var n=e.columns,r=new t(this._rows,n),i=void 0,o=void 0,a=void 0;for(i=0;i<this._rows;i++)for(o=0;o<n;o++)for(a=0;a<this._columns;a++)r._m[o+i*n]+=this._m[a+i*this._columns]*e._m[o+a*n];this._columns=n,this._m=r._m}},{key:"scalar",value:function(t){var e=this._rows*this._columns,n=void 0;for(n=0;n<e;n++)this._m[n]*=t}},{key:"add",value:function(t){if(this._isError=!1,this._errorMes="",this._rows!=t.rows||this._columns!=t.columns)return this._isError=!0,void(this._errorMes="Number of columns and rows of the first matrix doesn't match with number of columns and rows of the second matrix");var e=this._rows*this._columns,n=void 0;for(n=0;n<e;n++)this._m[n]+=t._m[n]}},{key:"substract",value:function(t){if(this._isError=!1,this._errorMes="",this._rows!=t.rows||this._columns!=t.columns)return this._isError=!0,void(this._errorMes="Number of columns and rows of the first matrix doesn't match with number of columns and rows of the second matrix");var e=this._rows*this._columns,n=void 0;for(n=0;n<e;n++)this._m[n]-=t._m[n]}},{key:"transpose",value:function(){var e=new t(this._columns,this._rows),n=void 0,r=void 0;for(n=0;n<this._rows;n++)for(r=0;r<this._columns;r++)e._m[n+r*this._rows]=this._m[r+n*this._columns];return e}},{key:"gaussElimination",value:function(){this._isError=!1,this._errorMes="";var t=void 0,e=void 0;if(this._det=1,this._rows>this._columns-1)return this._isError=!0,void(this._errorMes="This matrix doesn't represent any system of equations");var n=void 0,r=void 0,i=void 0;for(n=0;n<this._rows-1;n++){for(t=n,r=n+1;r<this._rows;r++)Math.abs(this._m[n+r*this._columns])>Math.abs(this._m[n+t*this._columns])&&(t=r);for(this.swapRows(n,t),r=n+1;r<this._rows;r++){if(0==this._m[n*(1+this._columns)])return this._isError=!0,void(this._errorMes="This system of equations doesn't have any solution");for(e=this._m[n+r*this._columns]/this._m[n*(1+this._columns)],i=n;i<this._columns;i++)this._m[i+r*this._columns]-=this._m[i+n*this._columns]*e}}return 0==this._m[(this._rows-1)*(1+this._columns)]?(this._isError=!0,void(this._errorMes="This system of equations doesn't have any solution")):void 0}},{key:"inverse",value:function(){this._isError=!1,this._errorMes="";var e=this._rows,n=new t(e,e);if(this._rows!=this._columns)return n.resize(0,0),n.isError=!0,n.errorMes="Number of rows doesn't match number of columns",n;var r=void 0,i=this.merge(n),o=i.columns,a=void 0;for(a=0;a<e;a++)i._m[a+e+a*o]=1;if(i.gaussElimination(),i.isError)return n.resize(0,0),n.isError=!0,n.errorMes=i.errorMes,n;for(var s=void 0,u=0;u<e;u++)for(a=e-1;a>=0;a--){for(r=0,s=a+1;s<e;s++)r+=i._m[s+a*o]*n._m[u+s*e];n._m[u+a*e]=(i._m[u+e+a*o]-r)/i._m[a*(1+o)]}return n}},{key:"gaussDeterminant",value:function(){if(this._isError=!1,this._errorMes="",this._rows!=this._columns)return this._isError=!0,this._errorMes="Number of rows doesn't match number of columns",null;var e=this._rows,n=this.merge(new t(e,1));if(n.gaussElimination(),n.isError)return this._isError=!0,this._errorMes="Some unexpected error",0;this._det=n.detMultiplier;var r=n.columns,i=void 0;for(i=0;i<e;i++)this._det*=n._m[i*(1+r)];return this._det}},{key:"recursiveDeterminant",value:function(){if(this._isError=!1,this._errorMes="",this._rows!=this._columns)return this._isError=!0,this._errorMes="Number of rows doesn't match number of columns",null;var t=this._rows,e=0,n=void 0,r=void 0,i=void 0,o=void 0,a=void 0,s=void 0;if(t>1)for(s=0;s<t;s++)0!=(a=this._m[s])&&(o=s%2==0?1:-1,0==s?i=this.fragment(1,1,t-1,this._columns-1):s==t-1?i=this.fragment(1,0,t-1,this.columns-2):(n=this.fragment(1,0,t-1,s-1),r=this.fragment(1,s+1,t-1,this._columns-1),i=n.merge(r)),e+=o*a*i.recursiveDeterminant());else e=_m[0];return e}},{key:"insert",value:function(t,e,n,r){var i=this._rows,o=this._columns;if(!(e>=i||n>=o)){var a=e+t.rows,s=n+t.columns;a=a>i?a:i,s=s>o?s:o,r&&this.resize(a,s),a=e+t.rows,s=n+t.columns;var u=a<=this._rows?a:this._rows,h=s<=this._columns?s:this._columns,l=void 0,c=void 0;for(l=e;l<u;l++)for(c=n;c<h;c++)this._m[c+l*this._columns]=t._m[c-n+(l-e)*t.columns]}}},{key:"resize",value:function(e,n){var r=this._rows,i=this._columns,o=new t(e,n),a=void 0,s=void 0;for(a=0;a<e;a++)if(a<r)for(s=0;s<n;s++)s<i&&(o._m[s+a*n]=this._m[s+a*i]);this._rows=e,this._columns=n,this._m=o._m}},{key:"fragment",value:function(e,n,r,i){e>this._rows&&(e=this._rows),n>this._columns&&(n=this._columns),r>this._rows&&(r=this._rows),i>this._columns&&(i=this._columns);var o=void 0;e>r&&(o=e,e=r,r=o),n>i&&(o=n,n=i,i=o);var a=i-n+1,s=new t(r-e+1,a),u=void 0,h=void 0;for(u=e;u<=r;u++)for(h=n;h<=i;h++)s._m[h-n+(u-e)*a]=_m[h+u*this._columns];return s}},{key:"merge",value:function(e){var n=e.rows,r=e.columns,i=this._rows,o=this._columns,a=o+r,s=new t(Math.max(i,n),a),u=void 0,h=void 0;for(u=0;u<i;u++)for(h=0;h<o;h++)s._m[h+u*a]=this._m[h+u*o];for(u=0;u<n;u++)for(h=0;h<r;h++)s._m[h+o+u*a]=e._m[h+u*r];return s}},{key:"swapRows",value:function(t,e){if(!(t>this._rows||e>this._rows)&&t!=e){this._det=-this._det;var n=void 0,r=void 0;for(r=0;r<this._columns;r++)n=this._m[r+t*this._columns],this._m[r+t*this._columns]=this._m[r+e*this._columns],this._m[r+e*this._columns]=n}}},{key:"random",value:function(t,e){var n=this._rows*this._columns,r=void 0;for(r=0;r<n;r++)this._m[r]=Math.round(Math.random()*(Math.max(t,e)-Math.min(t,e)))+Math.min(t,e)}},{key:"clone",value:function(){var e=this._rows*this._columns,n=new t(this._rows,this._columns),r=void 0;for(r=0;r<e;r++)n._m[r]=this._m[r];return n}},{key:"setElement",value:function(t,e,n){t>=this._rows||e>=this._columns||(this._m[e+t*this._columns]=n)}},{key:"getElement",value:function(t,e){return t>=this._rows||e>=this._columns?NaN:this._m[e+t*this._columns]}},{key:"setMatrixFromRows",value:function(t){var e=t.length,n=t[0].length,r=void 0,i=void 0;for(r=0;r<e;r++)if(t[r].length!=n)return;for(this._m.length=e*n,r=0;r<e;r++)for(i=0;i<n;i++)this._m[i+r*n]=t[r][i];this._rows=e,this._columns=n}},{key:"setMatrixFromVector",value:function(t,e,n){var r=e*n;if(r==t.length){var i=void 0;for(i=0;i<r;i++)this._m[i]=t[i];this._rows=e,this._columns=n}}},{key:"traceMatrix",value:function(){var t=void 0,e=void 0;for(t=0;t<this._rows;t++)for(e=0;e<this._columns;e++)this._m[e+t*this._columns],this._columns}}],[{key:"GaussSolution",value:function(e,n){var r=e.rows,i=void 0,o=new t(r,1);if(e.rows!=e.columns||e.rows!=n.rows||n.columns>1||0==n.columns)return o.resize(0,0),o.isError=!0,o.errorMes="Can't solve this system of equations",o;var a=e.merge(n),s=a.columns;if(a.gaussElimination(),a.isError)return o.resize(0,0),o.isError=!0,o.errorMes=a.errorMes,o;var u=void 0,h=void 0;for(u=r-1;u>=0;u--){for(i=0,h=u+1;h<r;h++)i+=a._m[h+u*s]*o._m[h];o._m[u]=(a._m[r+u*s]-i)/a._m[u*(1+s)]}return o}},{key:"LUPDecomposition",value:function(t,e){if(t.rows==t.columns){var n=t.rows;e.resize(n,1);var r=void 0,i=void 0,o=void 0;for(r=0;r<n;r++)e._m[r]=r;for(o=0;o<n;o++){var a=0,s=void 0;for(r=o;r<n;r++)Math.abs(t._m[o+r*n])>a&&(a=Math.abs(t._m[o+r*n]),s=r);if(0==a)return t.isError=!0,void(t.errorMes="Can't solve this system of equations");for(e.swapRows(o,s),t.swapRows(o,s),r=o+1;r<n;r++)for(t._m[o+r*n]/=t._m[o*(1+n)],i=o+1;i<n;i++)t._m[i+r*n]-=t._m[o+r*n]*t._m[i+o*n]}}}},{key:"LUPSolution",value:function(e,n,r){var i=e.rows,o=void 0,a=void 0,s=void 0,u=new t(i,1);if(e.isError||i!=e.columns||i!=n.rows||1!=n.columns||i!=r.rows||1!=r.columns)return u.resize(0,0),u.isError=!0,u.errorMes="Can't solve this system of equations",u;for(a=0;a<i;a++){for(o=0,s=0;s<a;s++)o+=e._m[s+a*i]*u._m[s];u._m[a]=r._m[n._m[a]]-o}for(a=i-1;a>=0;a--){for(o=0,s=a+1;s<i;s++)o+=e._m[s+a*i]*u._m[s];u._m[a]=(u._m[a]-o)/e._m[a*(1+i)]}return u}},{key:"CramerSolution",value:function(e,n){var r=e.rows,i=new t(r,1),o=void 0;if(e.rows!=e.columns||e.rows!=n.rows||1!=n.columns)return i.resize(0,0),i.isError=!0,i.errorMes="Can't solve this system of equations",i;var a=e.recursiveDeterminant();if(0==a)return i.resize(0,0),i.isError=!0,i.errorMes="The A matrix is not invertible. So I can't solve this system of equations",i;var s=void 0;for(s=0;s<r;s++)(o=e.clone()).insert(n,0,s),i._m[s]=o.recursiveDeterminant()/a;return i}}]),t}();e.exports=r},{}],8:[function(t,e,n){var r=function(){function t(){i(this,t)}return a(t,null,[{key:"round",value:function(t,e){return void 0===e&&(e=1),Math.round(t/e)*e}},{key:"floor",value:function(t,e){return void 0===e&&(e=1),Math.floor(t/e)*e}},{key:"ceil",value:function(t,e){return void 0===e&&(e=1),Math.ceil(t/e)*e}},{key:"random",value:function(e,n,r){if(void 0===n&&(n=0),void 0===r&&(r=1),e>n){var i=e;e=n,n=i}var o=n-e+1*r,a=Math.random()*o;return a+=e,t.floor(a,r)}},{key:"getUniqueID",value:function(){return t.getUnique()+""}},{key:"getUnique",value:function(){null==t._aUniqueIDs&&(t._aUniqueIDs=new Array);for(var e=new Date,n=e.getTime();!t.isUnique(n);)n+=t.random(e.getTime(),2*e.getTime());return t._aUniqueIDs.push(n),n}},{key:"isUnique",value:function(e){for(var n=0;n<t._aUniqueIDs.length;n++)if(t._aUniqueIDs[n]==e)return!1;return!0}}]),t}();e.exports=r},{}],9:[function(t,e,n){var r=function(){function t(){i(this,t),this.xmlDecl='<?xml version="1.0" encoding="UTF-8" ?>\n',this.attr_prefix="-"}return a(t,[{key:"parseXML",value:function(t){var e=void 0;if(window.DOMParser){var n=(new DOMParser).parseFromString(t,"application/xml");if(!n)return;e=n.documentElement}else window.ActiveXObject&&(xmldom=new ActiveXObject("Microsoft.XMLDOM"),xmldom.async=!1,xmldom.loadXML(t),e=xmldom.documentElement);if(e)return this.parseDOM(e)}},{key:"parseHTTP",value:function(t,e,n){var r={};for(var i in e)r[i]=e[i];if(r.method||(void 0===r.postBody&&void 0===r.postbody&&void 0===r.parameters?r.method="get":r.method="post"),n){r.asynchronous=!0;var o=this,a=n,s=r.onComplete;r.onComplete=function(t){var e=void 0;t&&t.responseXML&&t.responseXML.documentElement&&(e=o.parseDOM(t.responseXML.documentElement)),a(e,t),s&&s(t)}}else r.asynchronous=!1;var u=void 0;if("undefined"!=typeof HTTP&&HTTP.Request){r.uri=t;var h=new HTTP.Request(r);h&&(u=h.transport)}else if("undefined"!=typeof Ajax&&Ajax.Request){var l=new Ajax.Request(t,r);l&&(u=l.transport)}return n?u:u&&u.responseXML&&u.responseXML.documentElement?this.parseDOM(u.responseXML.documentElement):void 0}},{key:"parseDOM",value:function(t){if(t){if(this.__force_array={},this.force_array)for(var e=0;e<this.force_array.length;e++)this.__force_array[this.force_array[e]]=1;var n=this.parseElement(t);if(this.__force_array[t.nodeName]&&(n=[n]),11!==t.nodeType){var r={};r[t.nodeName]=n,n=r}return n}}},{key:"parseElement",value:function(t){if(7!==t.nodeType){if(3===t.nodeType||4===t.nodeType){if(null===t.nodeValue.match(/[^\x00-\x20]/))return;return t.nodeValue}var e=void 0,n={};if(t.attributes&&t.attributes.length){e={};for(var r=0;r<t.attributes.length;r++){var i=t.attributes[r].nodeName;if("string"==typeof i){var o=t.attributes[r].nodeValue;o&&(void 0===n[i=this.attr_prefix+i]&&(n[i]=0),n[i]++,this.addNode(e,i,n[i],o))}}}if(t.childNodes&&t.childNodes.length){var a=!0;e&&(a=!1);for(var s=0;s<t.childNodes.length&&a;s++){var u=t.childNodes[s].nodeType;3!==u&&4!==u&&(a=!1)}if(a){e||(e="");for(var h=0;h<t.childNodes.length;h++)e+=t.childNodes[h].nodeValue}else{e||(e={});for(var l=0;l<t.childNodes.length;l++){var c=t.childNodes[l].nodeName;if("string"==typeof c){var v=this.parseElement(t.childNodes[l]);v&&(void 0===n[c]&&(n[c]=0),n[c]++,this.addNode(e,c,n[c],v))}}}}return e}}},{key:"addNode",value:function(t,e,n,r){this.__force_array[e]?(1===n&&(t[e]=[]),t[e][t[e].length]=r):1===n?t[e]=r:2===n?t[e]=[t[e],r]:t[e][t[e].length]=r}},{key:"writeXML",value:function(t){var e=this.hash_to_xml(null,t);return this.xmlDecl+e}},{key:"hash_to_xml",value:function(t,e){var n=[],r=[];for(var i in e)if(e.hasOwnProperty(i)){var a=e[i];i.charAt(0)!==this.attr_prefix?void 0!==a&&a?"object"===(void 0===a?"undefined":o(a))&&a.constructor===Array?n[n.length]=this.array_to_xml(i,a):"object"===(void 0===a?"undefined":o(a))?n[n.length]=this.hash_to_xml(i,a):n[n.length]=this.scalar_to_xml(i,a):n[n.length]="<"+i+" />":r[r.length]=" "+i.substring(1)+'="'+this.xml_escape(a)+'"'}var s=r.join(""),u=n.join("");return void 0!==t&&t&&(u=n.length>0?u.match(/\n/)?"<"+t+s+">\n"+u+"</"+t+">\n":"<"+t+s+">"+u+"</"+t+">\n":"<"+t+s+" />\n"),u}},{key:"array_to_xml",value:function(t,e){for(var n=[],r=0;r<e.length;r++){var i=e[r];void 0!==i&&i?"object"===(void 0===i?"undefined":o(i))&&i.constructor===Array?n[n.length]=this.array_to_xml(t,i):"object"===(void 0===i?"undefined":o(i))?n[n.length]=this.hash_to_xml(t,i):n[n.length]=this.scalar_to_xml(t,i):n[n.length]="<"+t+" />"}return n.join("")}},{key:"scalar_to_xml",value:function(t,e){return"#text"===t?this.xml_escape(e):"<"+t+">"+this.xml_escape(e)+"</"+t+">\n"}},{key:"xml_escape",value:function(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}}]),t}();e.exports=r},{}],10:[function(t,e,n){var r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i(this,t),this.x=e,this.y=n}return a(t,[{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"normalize",value:function(t){var e=this.length;0!==e&&(this.x*=t/e,this.y*=t/e)}},{key:"add",value:function(e){return new t(this.x+e.x,this.y+e.y)}},{key:"subtract",value:function(e){return new t(this.x-e.x,this.y-e.y)}},{key:"sub",value:function(t){return this.subtract(t)}},{key:"equals",value:function(t){return this.x===t.x&&this.y===t.y}},{key:"toString",value:function(){return"{x:"+this.x+", y:"+this.y+"}"}},{key:"setTo",value:function(t,e){this.x=t,this.y=e}},{key:"length",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}}],[{key:"vec2ToPoint",value:function(e){return new t(e.get_x(),e.get_y())}},{key:"interpolate",value:function(e,n,r){var i=n.x-e.x,o=n.y-e.y;return new t(e.x+i*r,e.y+o*r)}},{key:"distance",value:function(t,e){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}}]),t}();e.exports=r},{}],11:[function(t,e,n){var r=t("./Point"),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;i(this,t),this.x=e,this.y=n,this.width=o,this.height=a,this.topLeftPoint=new r,this.sizePoint=new r}return a(t,[{key:"clone",value:function(){return new t(this.x,this.y,this.width,this.height)}},{key:"copyFrom",value:function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height}},{key:"union",value:function(e){if(0===e.width||0===e.height)return this;var n=Math.min(this.x,e.x),r=Math.min(this.y,e.y);return new t(n,r,Math.max(this.x+this.width,e.x+e.width)-n,Math.max(this.y+this.height,e.y+e.height)-r)}},{key:"inflate",value:function(t,e){this.x-=t,this.width+=2*t,this.y-=e,this.height+=2*e}},{key:"contains",value:function(t,e){return t>=this.x&&t<=this.right&&e>=this.y&&e<=this.bottom}},{key:"containsPoint",value:function(t){return this.contains(t.x,t.y)}},{key:"offset",value:function(t,e){this.x+=t,this.y+=e}},{key:"intersects",value:function(t,e){return e?!(t.left>=this.right||t.right<=this.left||t.top>=this.bottom||t.bottom<=this.top):!(t.left>this.right||t.right<this.left||t.top>this.bottom||t.bottom<this.top)}},{key:"intersection",value:function(e,n){var r=new t;return this.intersects(e,n)&&(e.left<=this.right?(r.x=e.left,r.width=this.right-r.x):(r.x=this.left,r.width=e.right-r.x),r.y=e.top<this.top?this.top:e.top,r.height=e.bottom<this.bottom?e.bottom:this.bottom,r.height=r.height-r.y),r}},{key:"isEmpty",value:function(){return this.width<=0||this.height<=0}},{key:"setEmpty",value:function(){this.x=0,this.y=0,this.width=0,this.height=0}},{key:"setTo",value:function(t,e,n,r){this.x=t,this.y=e,this.width=n,this.height=r}},{key:"left",get:function(){return this.x},set:function(t){this.x=t}},{key:"top",get:function(){return this.y},set:function(t){this.y=t}},{key:"right",get:function(){return this.x+this.width},set:function(t){this.width=t-this.x}},{key:"bottom",get:function(){return this.y+this.height},set:function(t){this.height=t-this.y}},{key:"topLeft",get:function(){return this.topLeftPoint.x=this.x,this.topLeftPoint.y=this.y,this.topLeftPoint},set:function(t){this.x=t.x,this.y=t.y}},{key:"size",get:function(){return this.sizePoint.x=this.width,this.sizePoint.y=this.height,this.sizePoint},set:function(t){this.width=t.x,this.height=t.y}}]),t}();e.exports=o},{"./Point":10}],12:[function(t,e,n){var r=function(){function t(){i(this,t)}return a(t,[{key:"load",value:function(t){var e=this;return new Promise(function(n,r){e._loadNextSVG(n,t,[])})}},{key:"_loadNextSVG",value:function(t,e,n){var r=this;if(0!==e.length){var i=e.shift();Snap.load(i.path,function(o){i.g=o.select("g"),n.push(i),r._loadNextSVG(t,e,n)},this)}else t(n)}}]),t}();e.exports=r},{}],13:[function(t,e,n){var r=function(){function t(){i(this,t)}return a(t,null,[{key:"stringsAreEqual",value:function(t,e,n){return n?t===e:t.toUpperCase()===e.toUpperCase()}},{key:"trim",value:function(e){return t.ltrim(t.rtrim(e))}},{key:"ltrim",value:function(t){for(var e=t.length,n=0;n<e;n++)if(t.charCodeAt(n)>32)return t.substring(n);return""}},{key:"rtrim",value:function(t){for(var e=t.length;e>0;e--)if(t.charCodeAt(e-1)>32)return t.substring(0,e);return""}},{key:"beginsWith",value:function(t,e){return e===t.substring(0,e.length)}},{key:"endsWith",value:function(t,e){return e===t.substring(t.length-e.length)}},{key:"remove",value:function(e,n){return t.replace(e,n,"")}},{key:"replace",value:function(t,e,n){return t.split(e).join(n)}},{key:"stringHasValue",value:function(t){return null!==t&&t.length>0}},{key:"contains",value:function(t,e){return""===t&&""===e||!!t&&t.indexOf(e)>-1}},{key:"addString",value:function(t,e,n){void 0===n&&(n="0");for(var r=t;r.length<e;)r+=n;return r}}]),t}();e.exports=r},{}],14:[function(t,e,n){var r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i(this,t),this._x=e,this._y=n}return a(t,[{key:"clone",value:function(){return new t(this._x,this._y)}},{key:"scale",value:function(t){return this._x*=t,this._y*=t,this}},{key:"add",value:function(t){return this._x+=t.x,this._y+=t.y,this}},{key:"substract",value:function(t){return this._x-=t.x,this._y-=t.y,this}},{key:"dotProduct",value:function(t){return this._x*t.x+this._y*t.y}},{key:"dotProdWithNormalizing",value:function(t){var e=t.clone().normalize();return this._x*e.x+this._y*e.y}},{key:"isPerpendicular",value:function(e){return Math.abs(this.dotProduct(e))<t.EPSILON_SQUARED}},{key:"crossProduct",value:function(t){return this._x*t.y-this._y*t.x}},{key:"isParallel",value:function(e){return Math.abs(this.crossProduct(e))<t.EPSILON_SQUARED}},{key:"isZero",value:function(){return Math.abs(this._x)<t.EPSILON&&Math.abs(this._y)<t.EPSILON}},{key:"zero",value:function(){this._x=this._y=0}},{key:"normalize",value:function(){return this.isZero()?(this._x=1,this):this.scale(1/this.length)}},{key:"isNormalized",value:function(){return Math.abs(this.lengthSquared-1)<t.EPSILON_SQUARED}},{key:"equals",value:function(e){return Math.abs(this._x-e.x)<t.EPSILON&&Math.abs(this._y-e.y)<t.EPSILON}},{key:"isValid",value:function(){return!isNaN(this._x)&&!isNaN(this._y)&&isFinite(this._x)&&isFinite(this._y)}},{key:"rotate",value:function(t){var e=Math.sin(t),n=Math.cos(t),r=this._x;return this._x=r*n-this._y*e,this._y=r*e+this._y*n,this}},{key:"rotateWithTrig",value:function(t,e){var n=this._x;return this._x=n*e-this._y*t,this._y=n*t+this._y*e,this}},{key:"negate",value:function(){return this._x*=-1,this._y*=-1,this}},{key:"projectTo",value:function(e){var n=this.dotProduct(e),r=e.lengthSquared;return new t(n*e.x/r,n*e.y/r)}},{key:"projectToNormalized",value:function(e){var n=this.dotProduct(e);return new t(n*e.x,n*e.y)}},{key:"perpProduct",value:function(t){return this.lx*t.x+this.ly*t.y}},{key:"ratio",value:function(e,n,r){return this.isParallel(r)?NaN:this.lengthSquared<t.EPSILON_SQUARED||r.lengthSquared<t.EPSILON_SQUARED?NaN:n.clone().substract(e).perpProduct(r)/this.perpProduct(r)}},{key:"findIntersection",value:function(e,n,r){var i=this.ratio(e,n,r);return isNaN(i)?new t(NaN,NaN):new t(e.x+i*this.x,e.y+i*this.y)}},{key:"findIntersectionInBounds",value:function(e,n,r){e.clone().substract(n);var i=this.ratio(e,n,r),o=r.ratio(n,e,this);return!isNaN(i)&&!isNaN(o)&&i>0&&i<=1&&o>0&&o<=1?new t(e.x+i*this.x,e.y+i*this.y):new t(NaN,NaN)}},{key:"truncate",value:function(t){return this.length=Math.min(t,this.length),this}},{key:"angleBetween",value:function(t){var e=this.clone(),n=t.clone();return this.isNormalized()||e.normalize(),t.isNormalized()||n.normalize(),Math.acos(e.dotProduct(n))}},{key:"setXY",value:function(t,e){this._x=t,this._y=e}},{key:"sign",value:function(t,e){return(t.x-this.x)*(e.y-this.y)-(t.y-this.y)*(e.x-this.x)}},{key:"dist",value:function(t){return Math.sqrt(this.distSquared(t))}},{key:"dist_XY",value:function(t,e){var n=t-this._x,r=e-this._y;return Math.sqrt(n*n+r*r)}},{key:"distSquared",value:function(t){var e=t.x-this._x,n=t.y-this._y;return e*e+n*n}},{key:"distSquared_XY",value:function(t,e){var n=t-this._x,r=e-this._y;return n*n+r*r}},{key:"bounce",value:function(t,e){void 0===e&&(e=1);var n=(1+e)*this.dotProduct(t);return this._x-=n*t.x,this._y-=n*t.y,this}},{key:"bounceWithFriction",value:function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=0),this.clone();var r=this.projectToNormalized(t.rightNormal),i=this.projectToNormalized(t),o=-i.x,a=-i.y,s=r.x,u=r.y;return this.x=o*e+s*n,this.y=a*e+u*n,this}},{key:"toString",value:function(){return"["+this._x+", "+this._y+"]"}},{key:"x",get:function(){return this._x},set:function(t){this._x=t}},{key:"y",get:function(){return this._y},set:function(t){this._y=t}},{key:"length",get:function(){return Math.sqrt(this._x*this._x+this._y*this._y)},set:function(t){var e=this.angle;this._x=t*Math.cos(e),this._y=t*Math.sin(e)}},{key:"lengthSquared",get:function(){return this._x*this._x+this._y*this._y}},{key:"angle",get:function(){return this.isZero()?0:Math.atan2(this._y,this._x)},set:function(t){var e=this.length;this._x=e*Math.cos(t),this._y=e*Math.sin(t)}},{key:"dx",get:function(){return this.isZero()?0:this._x/this.length}},{key:"dy",get:function(){return this.isZero()?0:this._y/this.length}},{key:"rightNormal",get:function(){return new t(-this._y,this._x)}},{key:"rx",get:function(){return-this._y}},{key:"ry",get:function(){return this._x}},{key:"leftNormal",get:function(){return new t(this._y,-this._x)}},{key:"lx",get:function(){return this._y}},{key:"ly",get:function(){return-this._x}}]),t}();r.EPSILON=1e-7,r.EPSILON_SQUARED=r.EPSILON*r.EPSILON,e.exports=r},{}],15:[function(t,e,n){var i=window.global=window.global||window;i.trace=console.log.bind(console),i.each=function(t,e,n){var r=void 0,i=t.length;for(r=0;r<i&&!1!==(n?e.call(n,r,t[r]):e.call(t[r],r,t[r]));r++);},Date.prototype.pattern=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours()%12==0?12:this.getHours()%12,"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(t)&&(t=t.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"/u661f/u671f":"/u5468":"")+{0:"/u65e5",1:"/u4e00",2:"/u4e8c",3:"/u4e09",4:"/u56db",5:"/u4e94",6:"/u516d"}[this.getDay()+""])),e)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[n]:("00"+e[n]).substr((""+e[n]).length)));return t};var o={Point:t("./Point"),Rectangle:t("./Rectangle"),SVGLoad:t("./SVGLoad"),ArrayUtil:t("./ArrayUtil"),NumberUtilities:t("./NumberUtilities"),Matrix:t("./Matrix"),ObjTree:t("./ObjTree"),StringUtil:t("./StringUtil"),Vector2DMath:t("./Vector2DMath"),HashMap:t("./HashMap"),MatrixMath:t("./MatrixMath"),GraphicsTexture:t("./GraphicsTexture"),GraphicsUtil:t("./GraphicsUtil"),M:t("./M")};e.exports=o,r.exports=o},{"./ArrayUtil":1,"./GraphicsTexture":2,"./GraphicsUtil":3,"./HashMap":4,"./M":5,"./Matrix":6,"./MatrixMath":7,"./NumberUtilities":8,"./ObjTree":9,"./Point":10,"./Rectangle":11,"./SVGLoad":12,"./StringUtil":13,"./Vector2DMath":14}]},{},[15])}).call(e,n(78)(t))}});